import{j as e}from"./date-vendor-D9pAgX5F.js";import{r as s}from"./react-vendor-DF7UJAlN.js";import{a as r}from"./redux-vendor-BzdbewH4.js";import{u as a,a as l}from"./index-DW-yAxzW.js";import{h as t,u as i,b as n,d as o,U as c,V as d,W as u,X as p,J as m,w as x,C as h,Z as f,H as g,c as b,e as j,_ as y,v,i as w,j as C,k,l as N,m as L,I as S}from"./ui-vendor-DjmSPU99.js";import{P as T}from"./DefaultLayout-BUcG_pV2.js";import{w as A}from"./withContractorScope-CFJqUjZ-.js";import{c as F}from"./cil-globe-alt-6J7AfP2A.js";import{c as H}from"./cil-home-DjIzczOB.js";import{c as z}from"./cil-description-MUzg6O3n.js";import{c as V}from"./cil-magnifying-glass-CDkY_4k-.js";import{c as R}from"./cil-cloud-upload-Ca9_6_ej.js";import{c as B}from"./cil-plus-D8mtC-W5.js";import{c as M}from"./cil-pencil-m516yCOw.js";import{c as Z}from"./cil-trash-CBbKHhHb.js";import"./form-vendor-CKNVq0c_.js";import"./utils-vendor-Nl-sF5xe.js";import"./icons-vendor-D82TZqJV.js";var D=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M101.667,400H464V16H100.667A60.863,60.863,0,0,0,40,76.667V430.25h.011c0,.151-.011.3-.011.453,0,35.4,27.782,65.3,60.667,65.3H464V464H100.667C85.664,464,72,448.129,72,430.7,72,414.06,85.585,400,101.667,400ZM360,48.333V221.149l-48.4-42.49L264,220.9V48.333ZM232,48V264h31.641l48.075-42.659L360.305,264H392V48h40V368H136.08L136,48ZM100.667,48H104l.076,320h-2.413A59.793,59.793,0,0,0,72,375.883V76.917A28.825,28.825,0,0,1,100.667,48Z' class='ci-primary'/>"],I=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M124,136H36a20.023,20.023,0,0,0-20,20V476a20.023,20.023,0,0,0,20,20h88a20.023,20.023,0,0,0,20-20V156A20.023,20.023,0,0,0,124,136ZM112,464H48V168h64Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M300,240H212a20.023,20.023,0,0,0-20,20V476a20.023,20.023,0,0,0,20,20h88a20.023,20.023,0,0,0,20-20V260A20.023,20.023,0,0,0,300,240ZM288,464H224V272h64Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M476,16H388a20.023,20.023,0,0,0-20,20V476a20.023,20.023,0,0,0,20,20h88a20.023,20.023,0,0,0,20-20V36A20.023,20.023,0,0,0,476,16ZM464,464H400V48h64Z' class='ci-primary'/>"],q=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M472,472H40a24.028,24.028,0,0,1-24-24V64A24.028,24.028,0,0,1,40,40H226.667a23.935,23.935,0,0,1,22.154,14.77L269.333,104H472a24.028,24.028,0,0,1,24,24V448A24.028,24.028,0,0,1,472,472ZM48,440H464V136H248L221.333,72H48Z' class='ci-primary'/>"],E=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M457.47,55.833c-53.026-53.026-139.307-53.026-192.332,0L168.971,152,191.6,174.627,287.765,78.46A104,104,0,0,1,434.843,225.539l-96.167,96.167L361.3,344.333l96.167-96.167C510.5,195.14,510.5,108.86,457.47,55.833Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M225.539,434.843a104,104,0,0,1-147.078,0h0a104,104,0,0,1,0-147.078l90.511-90.511-22.627-22.627L55.833,265.138A136,136,0,1,0,248.166,457.47l90.51-90.51-22.627-22.627Z' class='ci-primary'/><rect width='320' height='32' x='93.824' y='243.48' fill='var(--ci-primary-color, currentColor)' class='ci-primary' transform='rotate(-45 253.823 259.48)'/>"];const _=({label:s,name:r,type:a="text",required:l=!1,icon:t=null,placeholder:n="",value:o,onChange:c,...d})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(S,{className:"fw-medium text-dark mb-2",children:[s,l&&e.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e.jsxs(u,{children:[t&&e.jsx(p,{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",border:"1px solid #e3e6f0",borderRight:"none",borderRadius:"10px 0 0 10px"},children:e.jsx(i,{icon:t,size:"sm",style:{color:"#6c757d"}})}),e.jsx(m,{name:r,type:a,value:o,onChange:c,placeholder:n,style:{border:"1px solid #e3e6f0",borderRadius:t?"0 10px 10px 0":"10px",fontSize:"14px",padding:"12px 16px",transition:"all 0.3s ease",borderLeft:t?"none":"1px solid #e3e6f0"},...d})]})]}),P=({label:s,name:r,required:a=!1,icon:l=null,children:t,value:n,onChange:o,...c})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(S,{className:"fw-medium text-dark mb-2",children:[s,a&&e.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e.jsxs(u,{children:[l&&e.jsx(p,{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",border:"1px solid #e3e6f0",borderRight:"none",borderRadius:"10px 0 0 10px"},children:e.jsx(i,{icon:l,size:"sm",style:{color:"#6c757d"}})}),e.jsx(x,{name:r,value:n,onChange:o,style:{border:"1px solid #e3e6f0",borderRadius:l?"0 10px 10px 0":"10px",fontSize:"14px",padding:"12px 16px",transition:"all 0.3s ease",borderLeft:l?"none":"1px solid #e3e6f0"},...c,children:t})]})]}),W=A(({isContractor:S,contractorGroupId:A,contractorModules:W,contractorGroupName:G})=>{const{t:U}=a(),Y=r(e=>e.customization),[$,J]=s.useState([]),[X,K]=s.useState([]),O=e=>{if(!e)return"#ffffff";const s=e.replace("#","");return(.299*parseInt(s.substr(0,2),16)+.587*parseInt(s.substr(2,2),16)+.114*parseInt(s.substr(4,2),16))/255>.5?"#2d3748":"#ffffff"},[Q,ee]=s.useState([]),[se,re]=s.useState([]),[ae,le]=s.useState(""),[te,ie]=s.useState("all"),[ne,oe]=s.useState("all"),[ce,de]=s.useState(!0),[ue,pe]=s.useState(!1),[me,xe]=s.useState(!1),[he,fe]=s.useState(null),[ge,be]=s.useState(null),[je,ye]=s.useState(!1),[ve,we]=s.useState({title:"",url:"",type:"external"}),[Ce,ke]=s.useState({name:"",file:null,type:"pdf"}),Ne=[{value:"external",label:U("resources.linkType.external"),icon:F},{value:"internal",label:U("resources.linkType.internal"),icon:H},{value:"document",label:U("resources.linkType.document"),icon:D},{value:"help",label:U("resources.linkType.help"),icon:D}],Le=[{value:"pdf",label:U("resources.fileType.pdf"),icon:z},{value:"excel",label:U("resources.fileType.excel"),icon:I},{value:"word",label:U("resources.fileType.word"),icon:z},{value:"video",label:U("resources.fileType.video"),icon:z},{value:"image",label:U("resources.fileType.image"),icon:z},{value:"other",label:U("resources.fileType.other"),icon:z}],Se=e=>{switch(e){case"external":case"word":return"primary";case"internal":case"excel":return"success";case"document":case"image":return"info";case"help":return"warning";case"pdf":return"danger";case"video":return"dark";default:return"secondary"}},Te=(e,s=!1)=>{if(s){const s=Le.find(s=>s.value===e);return s?s.icon:z}{const s=Ne.find(s=>s.value===e);return s?s.icon:E}};s.useEffect(()=>{S&&(async()=>{try{de(!0);const e=await l.get("/api/resources?scope=contractor");e.data.success&&(J(e.data.data.links),K(e.data.data.files),ee(e.data.data.links),re(e.data.data.files))}catch(e){}finally{de(!1)}})()},[S]),s.useEffect(()=>{(()=>{let e=$,s=X;ae&&(e=e.filter(e=>e.title.toLowerCase().includes(ae.toLowerCase())||e.url.toLowerCase().includes(ae.toLowerCase())),s=s.filter(e=>e.name.toLowerCase().includes(ae.toLowerCase())||e.original_name.toLowerCase().includes(ae.toLowerCase()))),"all"!==te&&(e=e.filter(e=>e.type===te)),"all"!==ne&&(s=s.filter(e=>e.type===ne)),ee(e),re(s)})()},[ae,te,ne,$,X]);const Ae=()=>{},Fe=e=>{},He=e=>{},ze=()=>{},Ve=e=>{},Re=e=>{},Be=e=>{window.open(e.url,"_blank")},Me=({title:s,icon:r,children:a,gradient:l,onAddClick:t,addButtonText:c,emptyStateIcon:d,emptyStateText:u,emptyStateSubtext:p,showAddButton:m=!0})=>e.jsxs(n,{className:"border-0 shadow-sm mb-2 h-100",style:{borderRadius:"16px"},children:[e.jsx(b,{className:"border-0 pb-2",style:{background:l,borderRadius:"5px 5px 0 0",padding:"1.5rem"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-3",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"50px",height:"50px",backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:e.jsx(i,{icon:r,size:"lg",className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white mb-1 fw-bold",children:s}),e.jsx("p",{className:"text-white-50 mb-0 small",children:U("resources.manage",{title:s})})]})]}),m&&t&&e.jsxs(j,{color:"light",className:"shadow-sm fw-semibold",onClick:t,style:{borderRadius:"12px",border:"none",padding:"8px 20px",minWidth:"120px"},children:[e.jsx(i,{icon:B,className:"me-2",size:"sm"}),c]})]})}),e.jsx(o,{className:"p-0",children:a})]}),Ze=({icon:s,title:r,subtitle:a,onAddClick:l,buttonText:t,showButton:n=!0})=>e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"d-inline-flex align-items-center justify-content-center rounded-circle mb-3",style:{width:"80px",height:"80px",backgroundColor:"#f1f5f9",opacity:.7},children:e.jsx(i,{icon:s,size:"xl",style:{color:"#94a3b8"}})}),e.jsx("h6",{className:"text-muted mb-2",children:r}),e.jsx("p",{className:"text-muted small mb-3",children:a}),n&&l&&e.jsxs(j,{variant:"outline",color:"primary",onClick:l,style:{borderRadius:"12px",border:"2px solid #e2e8f0",padding:"8px 20px"},children:[e.jsx(i,{icon:B,className:"me-2",size:"sm"}),t]})]}),De=({item:s,isFile:r=!1,onEdit:a,onDelete:l,onDownload:t,isContractor:n=!1})=>e.jsx(y,{className:"border-0 px-4 py-3",style:{borderBottom:"1px solid #f1f5f9",transition:"all 0.2s ease"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{className:"d-flex align-items-start flex-grow-1",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3 flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:`var(--cui-${Se(s.type)}-100, #f1f5f9)`,color:`var(--cui-${Se(s.type)}, #6366f1)`},children:e.jsx(i,{icon:Te(s.type,r),size:"sm"})}),e.jsxs("div",{className:"flex-grow-1 min-width-0",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2 flex-wrap gap-2",children:[e.jsx("h6",{className:"mb-0 fw-semibold text-dark text-truncate",children:r?s.original_name||s.name:s.title}),e.jsx(v,{color:Se(s.type),shape:"rounded-pill",className:"small",children:s.type})]}),!r&&e.jsx("p",{className:"text-muted small mb-1 text-truncate",children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none",children:s.url})}),r&&e.jsxs("p",{className:"text-muted small mb-1",children:[U("resources.size"),": ",s.size]}),e.jsxs("small",{className:"text-muted",children:[U(r?"resources.uploaded":"resources.added"),": ",new Date(r?s.uploadedAt:s.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"d-flex gap-1 ms-2 flex-shrink-0",children:[r&&t&&e.jsx(j,{size:"sm",variant:"ghost",color:"success",onClick:()=>t(s),style:{borderRadius:"8px",padding:"6px 8px",border:"1px solid transparent",transition:"all 0.2s ease"},className:"hover-shadow",title:U("resources.downloadFile"),children:e.jsx(i,{icon:F,size:"sm"})}),!r&&!n&&e.jsx(j,{size:"sm",variant:"ghost",color:"info",onClick:()=>window.open(s.url,"_blank"),style:{borderRadius:"8px",padding:"6px 8px",border:"1px solid transparent",transition:"all 0.2s ease"},className:"hover-shadow",title:U("resources.openLink"),children:e.jsx(i,{icon:F,size:"sm"})}),!n&&a&&e.jsx(j,{size:"sm",variant:"ghost",color:"primary",onClick:()=>a(s),style:{borderRadius:"8px",padding:"6px 8px",border:"1px solid transparent",transition:"all 0.2s ease"},className:"hover-shadow",title:U("common.edit"),children:e.jsx(i,{icon:M,size:"sm"})}),!n&&l&&e.jsx(j,{size:"sm",variant:"ghost",color:"danger",onClick:()=>l(s.id),style:{borderRadius:"8px",padding:"6px 8px",border:"1px solid transparent",transition:"all 0.2s ease"},className:"hover-shadow",title:U("common.delete"),children:e.jsx(i,{icon:Z,size:"sm"})})]})]})}),Ie=({visible:s,onClose:r,title:a,children:l,onSave:t,saveButtonText:i,isLoading:n})=>e.jsxs(w,{visible:s,onClose:r,size:"lg",className:"modern-modal",children:[e.jsx(C,{style:{borderRadius:"16px 16px 0 0",background:Y.headerBg||"#667eea",color:O(Y.headerBg||"#667eea"),border:"none"},children:e.jsx(k,{className:"fw-bold text-white",children:a})}),e.jsx(N,{className:"p-4",style:{backgroundColor:"#fafbfc"},children:l}),e.jsxs(L,{style:{borderRadius:"0 0 16px 16px",backgroundColor:"#fafbfc",border:"none",padding:"1.5rem"},children:[e.jsx(j,{color:"light",onClick:r,style:{borderRadius:"12px",fontWeight:"600",padding:"8px 20px",border:"1px solid #e3e6f0"},children:U("common.cancel")}),e.jsxs(j,{style:{background:Y.headerBg||"#667eea",color:O(Y.headerBg||"#667eea"),border:"none",borderRadius:"12px",fontWeight:"600",padding:"8px 24px"},onClick:t,disabled:n,children:[n&&e.jsx(h,{size:"sm",className:"me-2"}),i]})]})]});return e.jsxs(t,{fluid:!0,className:"p-2 p-md-4",style:{backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsx("style",{children:"\n                    .hover-shadow:hover {\n                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;\n                        transform: translateY(-1px);\n                    }\n\n                    .modern-modal .modal-content {\n                        border-radius: 16px !important;\n                        border: none !important;\n                        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;\n                    }\n\n                    @media (max-width: 768px) {\n                        .d-flex.justify-content-between.align-items-center.flex-wrap {\n                            flex-direction: column;\n                            align-items: flex-start !important;\n                            gap: 1rem;\n                        }\n\n                        .d-flex.gap-1.ms-2.flex-shrink-0 {\n                            margin-left: 0 !important;\n                            margin-top: 0.5rem;\n                        }\n\n                        .min-width-0 {\n                            min-width: 0;\n                            width: 100%;\n                        }\n\n                        .text-truncate {\n                            max-width: 200px;\n                        }\n                    }\n\n                    @media (max-width: 576px) {\n                        .px-4 {\n                            padding-left: 1rem !important;\n                            padding-right: 1rem !important;\n                        }\n\n                        .flex-wrap.gap-3 > div:first-child {\n                            width: 100%;\n                        }\n\n                        .flex-wrap.gap-3 > div:last-child {\n                            width: 100%;\n                            text-align: center;\n                        }\n                    }\n                "}),e.jsx(T,{title:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px"},children:e.jsx(i,{icon:q,style:{fontSize:"32px",color:"white"}})}),U("nav.resources")]}),subtitle:U(S?"resources.headerContractor":"resources.headerAdmin")}),e.jsx(n,{className:"border-0 shadow-sm mb-4",children:e.jsx(o,{children:e.jsxs(c,{className:"g-3",children:[e.jsx(d,{md:6,children:e.jsxs(u,{children:[e.jsx(p,{children:e.jsx(i,{icon:V})}),e.jsx(m,{placeholder:U("resources.searchPlaceholder"),value:ae,onChange:e=>le(e.target.value),"aria-label":U("resources.searchPlaceholder"),style:{minHeight:"44px"}})]})}),e.jsx(d,{md:3,children:e.jsxs(x,{value:te,onChange:e=>ie(e.target.value),"aria-label":U("resources.allLinkTypes"),style:{minHeight:"44px"},children:[e.jsx("option",{value:"all",children:U("resources.allLinkTypes")}),Ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})}),e.jsx(d,{md:3,children:e.jsxs(x,{value:ne,onChange:e=>oe(e.target.value),"aria-label":U("resources.allFileTypes"),style:{minHeight:"44px"},children:[e.jsx("option",{value:"all",children:U("resources.allFileTypes")}),Le.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})})]})})}),e.jsx(c,{className:"g-4",children:ce?e.jsxs(d,{className:"text-center py-5",children:[e.jsx(h,{color:"primary"}),e.jsx("div",{className:"mt-3 text-muted",children:U("resources.loading")})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{lg:6,className:"mb-4",children:e.jsx(Me,{title:U("resources.links"),icon:E,gradient:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",onAddClick:S?null:Ae,addButtonText:U("resources.addLink"),emptyStateIcon:E,emptyStateText:U("resources.noLinks"),emptyStateSubtext:U(S?"resources.noLinksContractor":"resources.noLinksAdmin"),showAddButton:!S,children:0===Q.length?e.jsx(Ze,{icon:E,title:U("resources.noLinks"),subtitle:U(S?"resources.noLinksContractor":"resources.noLinksAdminAlt"),onAddClick:S?null:Ae,buttonText:U("resources.addFirstLink"),showButton:!S}):e.jsx(f,{flush:!0,children:Q.map(s=>e.jsx(De,{item:s,isFile:!1,onEdit:S?null:Fe,onDelete:S?null:He,isContractor:S},s.id))})})}),e.jsx(d,{lg:6,className:"mb-4",children:e.jsx(Me,{title:U("resources.files"),icon:q,gradient:"linear-gradient(135deg, #10b981 0%, #059669 100%)",onAddClick:S?null:ze,addButtonText:U("resources.addFile"),emptyStateIcon:q,emptyStateText:U("resources.noFiles"),emptyStateSubtext:U(S?"resources.noFilesContractor":"resources.noFilesAdmin"),showAddButton:!S,children:0===se.length?e.jsx(Ze,{icon:R,title:U("resources.noFiles"),subtitle:U(S?"resources.noFilesContractor":"resources.noFilesAdminAlt"),onAddClick:S?null:ze,buttonText:U("resources.uploadFirstFile"),showButton:!S}):e.jsx(f,{flush:!0,children:se.map(s=>e.jsx(De,{item:s,isFile:!0,onEdit:S?null:Ve,onDelete:S?null:Re,onDownload:Be,isContractor:S},s.id))})})})]})}),!S&&e.jsxs(e.Fragment,{children:[e.jsx(Ie,{visible:ue,onClose:()=>{pe(!1),we({title:"",url:"",type:"external"}),fe(null)},title:U(he?"resources.editLink":"resources.addNewLink"),onSave:()=>{},saveButtonText:U(he?"resources.updateLink":"resources.addLink"),isLoading:je,children:e.jsxs(g,{children:[e.jsx(_,{label:U("resources.linkTitle"),name:"title",required:!0,icon:E,placeholder:U("resources.enterLinkTitle"),value:ve.title,onChange:e=>we({...ve,title:e.target.value})}),e.jsx(_,{label:U("resources.url"),name:"url",type:"url",required:!0,icon:F,placeholder:U("resources.urlPlaceholder"),value:ve.url,onChange:e=>we({...ve,url:e.target.value})}),e.jsx(P,{label:U("resources.linkType.label"),name:"type",icon:D,value:ve.type,onChange:e=>we({...ve,type:e.target.value}),children:Ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})}),e.jsx(Ie,{visible:me,onClose:()=>{xe(!1),ke({name:"",file:null,type:"pdf"}),be(null)},title:U(ge?"resources.editFile":"resources.uploadNewFile"),onSave:()=>{},saveButtonText:U(ge?"resources.updateFile":"resources.uploadFile"),isLoading:je,children:e.jsxs(g,{children:[e.jsx(_,{label:U("resources.file"),name:"file",type:"file",required:!ge,icon:R,onChange:e=>{},accept:".pdf,.doc,.docx,.xls,.xlsx,.csv,.mp4,.avi,.mov,.jpg,.jpeg,.png,.gif"}),ge&&e.jsx("small",{className:"text-muted d-block mb-3",children:U("resources.leaveEmpty")}),e.jsx(_,{label:U("resources.fileName"),name:"name",required:!0,icon:z,placeholder:U("resources.enterFileName"),value:Ce.name,onChange:e=>ke({...Ce,name:e.target.value})}),e.jsx(P,{label:U("resources.fileType.label"),name:"type",icon:I,value:Ce.type,onChange:e=>ke({...Ce,type:e.target.value}),children:Le.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})})]})]})},"resources");export{W as default};
