import{j as e}from"./date-vendor-D9pAgX5F.js";import{u as s,r as i}from"./react-vendor-DF7UJAlN.js";import{S as o}from"./utils-vendor-Nl-sF5xe.js";import{u as t}from"./index-BmZAsEKv.js";import{f as a,g as n}from"./dateHelpers-BGZ-n686.js";import{u as l,T as r}from"./index-DW-yAxzW.js";import{u as c}from"./redux-vendor-BzdbewH4.js";import{h as d,e as m,u as x,b as f,d as p,H as h,U as g,V as j,I as u,W as b,X as y,J as v,a7 as N,w}from"./ui-vendor-DjmSPU99.js";import{P as k,a as C}from"./DefaultLayout-BUcG_pV2.js";import{c as z}from"./cil-arrow-left-D66Kb3Zq.js";import{c as S}from"./cil-home-DjIzczOB.js";import{c as R}from"./cil-envelope-closed-DSbcONbs.js";import{c as _}from"./cil-phone-4mwkG2LD.js";import{c as L}from"./cil-clock-0brlqJOZ.js";import{c as I}from"./cil-check-circle-BlU9eaow.js";import"./form-vendor-CKNVq0c_.js";import"./icons-vendor-D82TZqJV.js";const O={locationName:"",address:"",website:"",email:"",phone:"",country:"",timezone:""},T=()=>{const{t:T}=l(),q=s(),[B,H]=i.useState(O),D=i.useRef(O),[E,J]=i.useState({}),[U,W]=i.useState(""),[A,F]=i.useState(!1),P=c(),$=Object.values(t.getAllCountries()),V=B.country&&t.getCountry(B.country)?.timezones||[];i.useEffect(()=>{if(B.timezone){const e=setInterval(()=>{W(a(n(),B.timezone))},1e3);return()=>clearInterval(e)}},[B.timezone]);const X=e=>{const{name:s,value:i}=e.target;if("country"===s){const e=(t.getCountry(i)?.timezones||[])[0]||"";return H(s=>({...s,country:i,timezone:e})),void W(e?a(n(),e):"")}H(e=>({...e,[s]:i}))};return e.jsxs(d,{fluid:!0,className:"p-2 m-2",style:{backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsx(k,{title:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px"},children:e.jsx(x,{icon:C,style:{fontSize:"24px",color:"white"}})}),T("settings.locations.create.title")]}),subtitle:T("settings.locations.create.subtitle"),rightContent:e.jsx(m,{color:"light",variant:"ghost",className:"p-2",onClick:()=>q("/settings/locations"),style:{borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",color:"white"},children:e.jsx(x,{icon:z})})}),e.jsx(f,{className:"border-0 shadow-sm",children:e.jsx(p,{className:"p-4",children:e.jsxs(h,{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return B.locationName.trim()||(e.locationName=T("settings.locations.form.validation.locationNameRequired")),B.address.trim()||(e.address=T("settings.locations.form.validation.addressRequired")),B.website.trim()||(e.website=T("settings.locations.form.validation.websiteRequired")),B.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(B.email)||(e.email=T("settings.locations.form.validation.invalidEmail")):e.email=T("settings.locations.form.validation.emailRequired"),B.phone.trim()||(e.phone=T("settings.locations.form.validation.phoneRequired")),B.country||(e.country=T("settings.locations.form.validation.countryRequired")),B.timezone||(e.timezone=T("settings.locations.form.validation.timezoneRequired")),J(e),0===Object.keys(e).length})()){F(!0);try{200==(await P(r(B))).payload.status&&(o.fire({title:T("settings.locations.alerts.savedTitle"),text:T("settings.locations.alerts.savedText"),icon:"success",confirmButtonColor:"#28a745",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}}),q("/settings/locations"))}catch(s){o.fire({title:T("common.error"),text:s.message||T("settings.locations.alerts.genericError"),icon:"error",confirmButtonColor:"#dc3545"})}finally{F(!1)}}},children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"mb-3 text-dark fw-semibold d-flex align-items-center gap-2",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",backgroundColor:"#e7f3ff",borderRadius:"8px",color:"#0d6efd"},children:e.jsx(x,{icon:S,size:"sm"})}),T("settings.locations.form.titles.basicInfo")]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[T("settings.locations.form.labels.locationName"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:C,className:"text-primary"})}),e.jsx(v,{name:"locationName",value:B.locationName,onChange:X,invalid:!!E.locationName,placeholder:T("settings.locations.form.placeholders.locationName"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),E.locationName&&e.jsx(N,{invalid:!0,style:{display:"block"},children:E.locationName})]}),e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[T("settings.locations.form.labels.address"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:S,className:"text-success"})}),e.jsx(v,{name:"address",value:B.address,onChange:X,invalid:!!E.address,placeholder:T("settings.locations.form.placeholders.address"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),E.address&&e.jsx(N,{invalid:!0,style:{display:"block"},children:E.address})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"mb-3 text-dark fw-semibold d-flex align-items-center gap-2",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",backgroundColor:"#e6f7e6",borderRadius:"8px",color:"#28a745"},children:e.jsx(x,{icon:R,size:"sm"})}),T("settings.locations.form.titles.contactInfo")]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[T("settings.locations.form.labels.website"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:R,className:"text-info"})}),e.jsx(v,{name:"website",value:B.website,onChange:X,invalid:!!E.website,placeholder:T("settings.locations.form.placeholders.website"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),E.website&&e.jsx(N,{invalid:!0,style:{display:"block"},children:E.website})]}),e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[T("settings.locations.form.labels.email"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:R,className:"text-warning"})}),e.jsx(v,{name:"email",type:"email",value:B.email,onChange:X,invalid:!!E.email,placeholder:T("settings.locations.form.placeholders.email"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),E.email&&e.jsx(N,{invalid:!0,style:{display:"block"},children:E.email})]})]}),e.jsx(g,{className:"mb-3",children:e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[T("settings.locations.form.labels.phone"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:_,className:"text-success"})}),e.jsx(v,{name:"phone",type:"tel",value:B.phone,onChange:X,invalid:!!E.phone,placeholder:T("settings.locations.form.placeholders.phone"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),E.phone&&e.jsx(N,{invalid:!0,style:{display:"block"},children:E.phone})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"mb-3 text-dark fw-semibold d-flex align-items-center gap-2",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",backgroundColor:"#fff3cd",borderRadius:"8px",color:"#856404"},children:e.jsx(x,{icon:L,size:"sm"})}),T("settings.locations.form.titles.locationTime")]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[T("settings.locations.form.labels.country"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(w,{name:"country",value:B.country,onChange:X,invalid:!!E.country,style:{border:"1px solid #e3e6f0",borderRadius:"8px",fontSize:"14px",padding:"12px 16px"},children:[e.jsx("option",{value:"",children:T("settings.locations.form.select.country")}),$.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),E.country&&e.jsx(N,{invalid:!0,style:{display:"block"},children:E.country})]}),e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[T("settings.locations.form.labels.timezone"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(w,{name:"timezone",value:B.timezone,onChange:X,invalid:!!E.timezone,disabled:!B.country,style:{border:"1px solid #e3e6f0",borderRadius:"8px",fontSize:"14px",padding:"12px 16px",backgroundColor:B.country?"white":"#f8f9fa"},children:[e.jsx("option",{value:"",children:T("settings.locations.form.select.timezone")}),V.map(s=>e.jsx("option",{value:s,children:s},s))]}),E.timezone&&e.jsx(N,{invalid:!0,style:{display:"block"},children:E.timezone})]})]}),U&&e.jsx(g,{className:"mb-3",children:e.jsxs(j,{md:6,children:[e.jsx(u,{className:"fw-semibold text-dark",children:T("settings.locations.form.labels.currentTime")}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#e7f3ff",border:"1px solid #b6d7ff"},children:e.jsx(x,{icon:L,className:"text-primary"})}),e.jsx(v,{value:U,readOnly:!0,tabIndex:-1,style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0",borderLeft:"none",cursor:"not-allowed",fontSize:"14px",fontWeight:"500",color:"#495057"}})]}),e.jsx("small",{className:"text-muted",children:T("settings.locations.form.hints.liveTime")})]})})]}),e.jsx("hr",{className:"my-4",style:{border:"1px solid #e3e6f0"}}),e.jsxs("div",{className:"d-flex gap-3 justify-content-end",children:[e.jsxs(m,{type:"button",color:"light",onClick:()=>{JSON.stringify(B)!==JSON.stringify(D.current)?o.fire({title:T("common.confirm"),text:T("settings.locations.alerts.leaveWarning"),icon:"warning",showCancelButton:!0,confirmButtonText:T("settings.locations.alerts.leaveAnyway"),cancelButtonText:T("settings.locations.alerts.stayOnPage"),confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}}).then(e=>{e.isConfirmed&&q("/settings/locations")}):q("/settings/locations")},className:"px-4 py-2 fw-semibold",style:{border:"1px solid #e3e6f0",borderRadius:"8px",color:"#6c757d",minHeight:"44px"},"aria-label":T("common.cancel"),children:[e.jsx(x,{icon:z,className:"me-2"}),T("common.cancel")]}),e.jsx(m,{type:"submit",color:"success",disabled:A,className:"px-4 py-2 fw-semibold",style:{border:"none",borderRadius:"8px",background:A?"#6c757d":"linear-gradient(45deg, #28a745, #20c997)",boxShadow:"0 2px 4px rgba(40, 167, 69, 0.2)",minHeight:"44px"},children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:e.jsx("span",{className:"visually-hidden",children:T("common.loading")})}),T("settings.locations.create.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{icon:I,className:"me-2"}),T("settings.locations.create.submit")]})})]})]})})})]})};export{T as default};
