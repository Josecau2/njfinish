import{j as e}from"./date-vendor-D9pAgX5F.js";import{r as s,u as t}from"./react-vendor-DF7UJAlN.js";import{h as o,e as r,u as a,b as i,d as l,U as n,V as c,W as d,X as m,J as x,v as h,C as g,$ as p,a0 as j,a1 as u,a2 as b,a3 as f,a4 as y,w as N}from"./ui-vendor-DjmSPU99.js";import{P as v}from"./PaginationControls-DFQNokso.js";import{P as w,a as C,g as T,b as z}from"./DefaultLayout-BUcG_pV2.js";import{u as k,a as R}from"./redux-vendor-BzdbewH4.js";import{u as S,x as M,S as L}from"./index-DW-yAxzW.js";import{S as D}from"./utils-vendor-Nl-sF5xe.js";import{i as P}from"./index-BmyYYes_.js";import{c as W}from"./cil-plus-D8mtC-W5.js";import{c as B}from"./cil-search-CDkY_4k-.js";import{c as E}from"./cil-envelope-closed-DSbcONbs.js";import{c as $}from"./cil-globe-alt-6J7AfP2A.js";import{c as H}from"./cil-pencil-m516yCOw.js";import{c as X}from"./cil-trash-CBbKHhHb.js";import"./form-vendor-CKNVq0c_.js";import"./cil-chevron-right-DSvcss7_.js";import"./icons-vendor-D82TZqJV.js";const _=()=>{const{t:_}=S(),[I,J]=s.useState(""),[U,V]=s.useState(1),[Y,q]=s.useState(10),A=t(),F=k(),{list:G,loading:K,error:O}=R(e=>e.locations);s.useEffect(()=>{F(M())},[F]);const Q=G.filter(e=>{const s=(e.email||"").toLowerCase(),t=(e.locationName||"").toLowerCase(),o=I.toLowerCase();return s.includes(o)||t.includes(o)}),Z=Math.ceil((Q.length||0)/Y),ee=Q.slice((U-1)*Y,U*Y),se=e=>{V(e)},te=0===Q.length?0:(U-1)*Y+1,oe=Math.min(U*Y,Q.length);return e.jsxs(o,{fluid:!0,className:"p-2 m-2",style:{backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsx(w,{title:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px"},children:e.jsx(P,{className:"text-white",style:{fontSize:"24px"}})}),_("settings.locations.header")]}),subtitle:_("settings.locations.subtitle"),rightContent:e.jsxs(r,{color:"light",className:"shadow-sm px-4 fw-semibold",onClick:()=>{A("/settings/locations/create")},style:{borderRadius:"5px",border:"none",transition:"all 0.3s ease"},children:[e.jsx(a,{icon:W,className:"me-2"}),_("settings.locations.add")]})}),e.jsx(i,{className:"border-0 shadow-sm mb-1",children:e.jsx(l,{children:e.jsxs(n,{className:"align-items-center",children:[e.jsx(c,{md:6,lg:4,children:e.jsxs(d,{children:[e.jsx(m,{style:{background:"none",border:"none"},children:e.jsx(a,{icon:B})}),e.jsx(x,{type:"text",placeholder:_("settings.locations.searchPlaceholder"),value:I,onChange:e=>{J(e.target.value),V(1)},style:{border:"1px solid #e3e6f0",borderRadius:"10px",fontSize:"14px",padding:"12px 16px"}})]})}),e.jsx(c,{md:6,lg:8,className:"text-md-end mt-3 mt-md-0",children:e.jsxs("div",{className:"d-flex justify-content-md-end align-items-center gap-3",children:[e.jsx(h,{color:"info",className:"px-3 py-2",style:{borderRadius:"20px",fontSize:"12px",fontWeight:"500"},children:_("settings.locations.stats.total",{count:G?.length||0})}),e.jsx("span",{className:"text-muted small",children:_("settings.locations.stats.showingResults",{count:Q?.length||0})})]})})]})})}),O&&e.jsx(i,{className:"border-0 shadow-sm",children:e.jsx(l,{children:e.jsxs("div",{className:"alert alert-danger mb-0",children:[e.jsxs("strong",{children:[_("common.error"),":"]})," ",_("settings.locations.errorLoad"),": ",O]})})}),K&&e.jsx(i,{className:"border-0 shadow-sm",children:e.jsxs(l,{className:"text-center py-5",children:[e.jsx(g,{color:"primary",size:"lg"}),e.jsx("p",{className:"text-muted mt-3 mb-0",children:_("settings.locations.loading")})]})}),!K&&!O&&e.jsx(i,{className:"border-0 shadow-sm",children:e.jsxs(l,{className:"p-0",children:[e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs(p,{hover:!0,responsive:!0,className:"mb-0",children:[e.jsx(j,{style:{backgroundColor:"#f8f9fa"},children:e.jsxs(u,{children:[e.jsx(b,{scope:"col",className:"border-0 fw-semibold text-muted py-3",children:"#"}),e.jsx(b,{scope:"col",className:"border-0 fw-semibold text-muted py-3",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(a,{icon:C,size:"sm"}),_("settings.locations.table.locationName")]})}),e.jsx(b,{scope:"col",className:"border-0 fw-semibold text-muted py-3",children:_("settings.locations.table.address")}),e.jsx(b,{scope:"col",className:"border-0 fw-semibold text-muted py-3",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(a,{icon:E,size:"sm"}),_("settings.locations.table.email")]})}),e.jsx(b,{scope:"col",className:"border-0 fw-semibold text-muted py-3",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(a,{icon:$,size:"sm"}),_("settings.locations.table.website")]})}),e.jsx(b,{scope:"col",className:"border-0 fw-semibold text-muted py-3 text-center",children:_("settings.locations.table.actions")})]})}),e.jsx(f,{children:0===Q?.length?e.jsx(u,{children:e.jsx(y,{colSpan:"6",className:"text-center py-5",children:e.jsxs("div",{className:"text-muted",children:[e.jsx(a,{icon:C,size:"xl",className:"mb-3 opacity-25"}),e.jsx("p",{className:"mb-0",children:_("settings.locations.empty.title")}),e.jsx("small",{children:_("settings.locations.empty.subtitle")})]})})}):ee?.map((s,t)=>e.jsxs(u,{style:{transition:"all 0.2s ease"},children:[e.jsx(y,{className:"py-3 border-0 border-bottom border-light",children:e.jsx(h,{color:"secondary",className:"px-2 py-1",style:{borderRadius:"12px",fontSize:"11px",fontWeight:"500"},children:te+t})}),e.jsx(y,{className:"py-3 border-0 border-bottom border-light",children:e.jsx("div",{className:"fw-medium text-dark",children:s.locationName||_("common.na")})}),e.jsx(y,{className:"py-3 border-0 border-bottom border-light",children:e.jsx("span",{className:"text-muted small",children:s.address||_("common.na")})}),e.jsx(y,{className:"py-3 border-0 border-bottom border-light",children:s.email?e.jsx("a",{href:`mailto:${s.email}`,className:"text-decoration-none",style:{color:"#0d6efd"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:s.email}):e.jsx("span",{className:"text-muted",children:_("common.na")})}),e.jsx(y,{className:"py-3 border-0 border-bottom border-light",children:s.website?e.jsx("a",{href:s.website?.startsWith("http")?s.website:`https://${s.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none",style:{color:"#0d6efd"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:s.website}):e.jsx("span",{className:"text-muted",children:_("common.na")})}),e.jsx(y,{className:"py-3 border-0 border-bottom border-light text-center",children:e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx(r,{color:"light",size:"sm",className:"p-2",onClick:()=>(e=>{const s=`/${T(6)}/${T(8)}`+z("/settings/locations/edit/:id",{id:e});A(s)})(s.id),"aria-label":_("settings.locations.actions.edit"),style:{borderRadius:"8px",border:"1px solid #e3e6f0",transition:"all 0.2s ease",minHeight:"44px",minWidth:"44px"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#e7f3ff",e.currentTarget.style.borderColor="#0d6efd"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="",e.currentTarget.style.borderColor="#e3e6f0"},children:e.jsx(a,{icon:H,size:"sm",style:{color:"#0d6efd"}})}),e.jsx(r,{color:"light",size:"sm",className:"p-2",onClick:()=>{return e=s.id,void D.fire({title:_("common.confirm"),text:_("settings.locations.confirm.text"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:_("settings.locations.confirm.confirmYes"),cancelButtonText:_("common.cancel")}).then(async s=>{if(s.isConfirmed)try{await F(L(e)).unwrap(),D.fire(_("settings.locations.confirm.deletedTitle"),_("settings.locations.confirm.deletedText"),"success")}catch(t){D.fire(_("settings.locations.confirm.errorTitle"),_("settings.locations.confirm.errorText"),"error")}else s.dismiss===D.DismissReason.cancel&&D.fire(_("settings.locations.confirm.cancelledTitle"),_("settings.locations.confirm.cancelledText"),"info")});var e},"aria-label":_("settings.locations.actions.delete"),style:{borderRadius:"8px",border:"1px solid #e3e6f0",transition:"all 0.2s ease",minHeight:"44px",minWidth:"44px"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#ffe6e6",e.currentTarget.style.borderColor="#dc3545"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="",e.currentTarget.style.borderColor="#e3e6f0"},children:e.jsx(a,{icon:X,size:"sm",style:{color:"#dc3545"}})})]})})]},s.id))})]})}),Z>1&&e.jsx("div",{className:"p-3 border-top border-light",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-3",children:[e.jsx("div",{className:"text-muted small",children:_("settings.locations.showingRange",{start:0===Q.length?0:te,end:oe,total:Q.length})}),e.jsx("div",{className:"d-flex justify-content-center flex-grow-1",children:e.jsx(v,{page:U,totalPages:Z,goPrev:()=>se(U-1),goNext:()=>se(U+1)})}),e.jsx("div",{style:{width:"120px"},children:e.jsx(N,{size:"sm",value:Y,onChange:e=>{q(Number(e.target.value)),V(1)},style:{borderRadius:"6px",fontSize:"12px"},children:[5,10,15,20,25].map(s=>e.jsx("option",{value:s,children:_("settings.locations.showItems",{count:s})},s))})})]})})]})})]})};export{_ as default};
