import{j as s}from"./date-vendor-D9pAgX5F.js";import{r as e,u as t}from"./react-vendor-DF7UJAlN.js";import{T as a}from"./icons-lucide-DddGqAYX.js";import{P as i,g as n,b as r}from"./DefaultLayout-BUcG_pV2.js";import{u as l,a as c}from"./redux-vendor-BzdbewH4.js";import{u as d,w as m,M as o}from"./index-DW-yAxzW.js";import{S as x}from"./utils-vendor-Nl-sF5xe.js";import{P as h}from"./PaginationComponent-B2yVAl0f.js";import{h as g,e as j,U as u,V as N,b,d as p,W as f,X as v,J as y,C as w,$ as z,a0 as C,a1 as P,a2 as k,a3 as S,a4 as T,v as U}from"./ui-vendor-DjmSPU99.js";import{P as R,k as B,j as L,U as G,S as M,a as A}from"./icons-vendor-D82TZqJV.js";import"./form-vendor-CKNVq0c_.js";const W=()=>{const[W,$]=e.useState(""),[D,E]=e.useState(1),[I,J]=e.useState(10),X=t(),F=l(),{list:O,loading:V,error:Y}=c(s=>s.users),{t:q}=d();let H=JSON.parse(localStorage.getItem("user")).userId;e.useEffect(()=>{F(m())},[F]);const K=O.filter(s=>s&&s.name&&s.email).filter(s=>s.id!==H).filter(s=>s.name.toLowerCase().includes(W.toLowerCase())||s.email.toLowerCase().includes(W.toLowerCase())),Q=Math.ceil((K.length||0)/I),Z=K?.slice((D-1)*I,D*I),_=(D-1)*I+1;Math.min(D*I,K.length);const ss=s=>{const e=`/${n(6)}/${n(8)}`+r("/settings/users/edit/:id",{id:s});X(e)},es=s=>{x.fire({title:q("settings.users.confirm.title"),text:q("settings.users.confirm.text"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:q("settings.users.confirm.confirmYes"),cancelButtonText:q("common.cancel")}).then(async e=>{if(e.isConfirmed)try{await F(o(s)).unwrap(),x.fire(q("common.deleted")+"!",q("settings.users.confirm.deletedText"),"success")}catch(t){x.fire(q("common.error")+"!",q("settings.users.confirm.errorText"),"error")}else e.dismiss===x.DismissReason.cancel&&x.fire(q("settings.users.confirm.cancelledTitle"),q("settings.users.confirm.cancelledText"),"info")})},ts=s=>({Admin:"primary",Manager:"success",User:"secondary",Editor:"warning"}[s]||"secondary"),as=K.filter(s=>"Admin"===s.role).length,is=K.filter(s=>"Admin"!==s.role).length;return s.jsxs(g,{fluid:!0,className:"settings-container",children:[s.jsx(i,{title:q("settings.users.header"),subtitle:q("settings.users.subtitle"),rightContent:s.jsxs("div",{className:"d-flex gap-2",children:[s.jsxs(j,{color:"light",className:"settings-action-button",onClick:()=>{X("/settings/users/create")},"aria-label":q("settings.users.addUser"),children:[s.jsx(R,{size:16,className:"me-2","aria-hidden":"true"}),q("settings.users.addUser")]}),s.jsxs(j,{color:"success",className:"settings-action-button success",onClick:()=>{X("/settings/users/group/create")},"aria-label":q("settings.users.addGroup"),children:[s.jsx(B,{size:16,className:"me-2","aria-hidden":"true"}),q("settings.users.addGroup")]})]})}),s.jsxs(u,{className:"mb-2",children:[s.jsx(N,{md:4,children:s.jsx(b,{className:"settings-stats-card",children:s.jsx(p,{children:s.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[s.jsx("div",{className:"settings-stat-icon primary",children:s.jsx(L,{size:20,"aria-hidden":"true"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-0 fw-bold text-primary",children:K.length}),s.jsx("small",{className:"text-muted",children:q("settings.users.stats.totalUsers")})]})]})})})}),s.jsx(N,{md:4,children:s.jsx(b,{className:"settings-stats-card",children:s.jsx(p,{children:s.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[s.jsx("div",{className:"settings-stat-icon success",children:s.jsx(B,{size:20,"aria-hidden":"true"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-0 fw-bold text-success",children:as}),s.jsx("small",{className:"text-muted",children:q("settings.users.stats.administrators")})]})]})})})}),s.jsx(N,{md:4,children:s.jsx(b,{className:"settings-stats-card",children:s.jsx(p,{children:s.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[s.jsx("div",{className:"settings-stat-icon warning",children:s.jsx(G,{size:20,"aria-hidden":"true"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-0 fw-bold text-warning",children:is}),s.jsx("small",{className:"text-muted",children:q("settings.users.stats.regularUsers")})]})]})})})})]}),s.jsx(b,{className:"settings-search-card",children:s.jsx(p,{children:s.jsxs(u,{className:"align-items-center",children:[s.jsx(N,{md:6,lg:4,children:s.jsxs(f,{children:[s.jsx(v,{style:{background:"none",border:"none"},children:s.jsx(M,{size:16,"aria-hidden":"true"})}),s.jsx(y,{type:"text",placeholder:q("settings.users.searchPlaceholder"),value:W,onChange:s=>{$(s.target.value),E(1)},className:"settings-search-input","aria-label":q("settings.users.searchPlaceholder")})]})}),s.jsx(N,{md:6,lg:8,className:"text-md-end mt-3 mt-md-0",children:s.jsx("span",{className:"text-muted small",children:q("settings.users.showing",{count:K?.length||0,total:O?.length||0})})})]})})}),Y&&s.jsx(b,{className:"settings-search-card",children:s.jsx(p,{children:s.jsxs("div",{className:"alert alert-danger mb-0",children:[s.jsxs("strong",{children:[q("common.error"),":"]})," ",q("settings.users.loadFailed"),": ",Y.message||Y.toString()||q("common.error")]})})}),V&&s.jsx(b,{className:"settings-table-card",children:s.jsxs(p,{className:"settings-empty-state",children:[s.jsx(w,{color:"primary",size:"lg"}),s.jsx("p",{className:"text-muted mt-3 mb-0",children:q("settings.users.loading")})]})}),!V&&s.jsx(b,{className:"settings-table-card",children:s.jsxs(p,{className:"p-0",children:[s.jsx("div",{className:"d-none d-md-block table-wrap",children:s.jsxs(z,{hover:!0,responsive:!0,className:"mb-0 table-modern",children:[s.jsx(C,{className:"settings-table-header",children:s.jsxs(P,{children:[s.jsx(k,{className:"text-center",children:"#"}),s.jsx(k,{children:s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx(G,{size:14,"aria-hidden":"true"}),q("settings.users.table.name")]})}),s.jsx(k,{children:q("settings.users.table.email")}),s.jsx(k,{className:"text-center",children:q("settings.users.table.group")}),s.jsx(k,{className:"text-center",children:q("settings.users.table.actions")})]})}),s.jsx(S,{children:0===Z?.length?s.jsx(P,{children:s.jsx(T,{colSpan:"5",className:"settings-empty-state",children:s.jsxs("div",{className:"text-muted",children:[s.jsx(M,{size:20,className:"settings-empty-icon","aria-hidden":"true"}),s.jsx("p",{className:"mb-0",children:q("settings.users.empty.title")}),s.jsx("small",{children:q("settings.users.empty.subtitle")})]})})}):Z.map((e,t)=>s.jsxs(P,{className:"settings-table-row",children:[s.jsx(T,{className:"text-center",children:s.jsx(U,{color:"light",className:"px-2 py-1",style:{borderRadius:"15px",fontSize:"11px",fontWeight:"500",color:"#6c757d"},children:_+t})}),s.jsx(T,{children:s.jsx("div",{className:"fw-medium text-dark",children:e.name})}),s.jsx(T,{children:s.jsx("span",{className:"text-muted",children:e.email})}),s.jsx(T,{className:"text-center",children:e.group?s.jsx(U,{color:ts(e.group.name),className:"settings-badge",children:e.group.name}):s.jsx(U,{color:"secondary",className:"settings-badge",children:q("settings.users.noGroup")})}),s.jsx(T,{className:"text-center",children:s.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[s.jsx(j,{color:"light",size:"sm",className:"icon-btn",onClick:()=>ss(e.id),title:q("common.edit"),"aria-label":q("common.edit"),style:{border:"1px solid #e3e6f0",borderRadius:"8px"},children:s.jsx(A,{size:16,"aria-hidden":"true"})}),s.jsx(j,{color:"light",size:"sm",className:"icon-btn",onClick:()=>es(e.id),title:q("common.delete"),"aria-label":q("common.delete"),style:{border:"1px solid #e3e6f0",borderRadius:"8px"},children:s.jsx(a,{size:16,"aria-hidden":"true"})})]})})]},e.id))})]})}),s.jsx("div",{className:"settings-mobile-cards d-md-none",children:0===Z?.length?s.jsx("div",{className:"settings-empty-state",children:s.jsxs("div",{className:"text-muted",children:[s.jsx(M,{size:20,className:"settings-empty-icon","aria-hidden":"true"}),s.jsx("p",{className:"mb-0",children:q("settings.users.empty.title")}),s.jsx("small",{children:q("settings.users.empty.subtitle")})]})}):Z.map((e,t)=>s.jsxs("div",{className:"settings-mobile-card",children:[s.jsx("div",{className:"settings-mobile-card-header",children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("span",{children:["#",_+t]}),s.jsx(U,{color:e.group?ts(e.group.name):"secondary",className:"settings-badge",children:e.group?e.group.name:q("settings.users.noGroup")})]})}),s.jsxs("div",{className:"settings-mobile-card-body",children:[s.jsxs("div",{className:"settings-mobile-field",children:[s.jsx("span",{className:"settings-mobile-label",children:q("settings.users.table.name")}),s.jsx("span",{className:"settings-mobile-value fw-medium",children:e.name})]}),s.jsxs("div",{className:"settings-mobile-field",children:[s.jsx("span",{className:"settings-mobile-label",children:q("settings.users.table.email")}),s.jsx("span",{className:"settings-mobile-value text-muted",children:e.email})]})]}),s.jsxs("div",{className:"settings-mobile-actions",children:[s.jsx(j,{color:"light",size:"sm",className:"icon-btn",onClick:()=>ss(e.id),title:q("common.edit"),"aria-label":q("common.edit"),style:{border:"1px solid #e3e6f0",borderRadius:"8px"},children:s.jsx(A,{size:16,"aria-hidden":"true"})}),s.jsx(j,{color:"light",size:"sm",className:"icon-btn",onClick:()=>es(e.id),title:q("common.delete"),"aria-label":q("common.delete"),style:{border:"1px solid #e3e6f0",borderRadius:"8px"},children:s.jsx(a,{size:16,"aria-hidden":"true"})})]})]},e.id))}),s.jsx("div",{className:"settings-pagination",children:s.jsx(h,{currentPage:D,totalPages:Q,onPageChange:s=>{E(s)},itemsPerPage:I})})]})})]})};export{W as default};
