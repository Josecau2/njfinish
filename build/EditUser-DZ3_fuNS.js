import{j as s}from"./date-vendor-D9pAgX5F.js";import{i as e,u as a,r as t}from"./react-vendor-DF7UJAlN.js";import{h as n,H as r,b as i,d as o,u as c,U as l,V as m,I as d,J as p,a7 as u,w as h,a8 as x,e as g}from"./ui-vendor-DjmSPU99.js";import{u as y,a as j}from"./redux-vendor-BzdbewH4.js";import{d as f,P as N,c as _,l as b}from"./DefaultLayout-BUcG_pV2.js";import{u as v,Q as C,x as w,H as z,b as S,R as P}from"./index-DW-yAxzW.js";import{S as F}from"./utils-vendor-Nl-sF5xe.js";import{c as R}from"./cil-lock-locked-DWQzOIEv.js";import{c as G}from"./cil-home-DjIzczOB.js";import{c as k}from"./cil-building-DVuwBvuD.js";import{c as B}from"./cil-arrow-left-D66Kb3Zq.js";import{c as A}from"./cil-save-CHBg7z_U.js";import"./form-vendor-CKNVq0c_.js";import"./icons-vendor-D82TZqJV.js";const E={name:"",email:"",password:"",confirmPassword:"",userGroup:"",location:"",isSalesRep:!1,street_address:"",city:"",state:"",zip_code:"",country:"",company_name:"",company_street_address:"",company_city:"",company_state:"",company_zip_code:"",company_country:""},I=()=>{const{t:I}=v(),{id:q}=e(),Z=f(q),H=y(),O=a(),[J,D]=t.useState(E),T=t.useRef(E),[L,M]=t.useState({}),[Q,U]=t.useState(!1),{selected:V}=j(s=>s.users),{list:W}=j(s=>s.locations),{list:$=[]}=j(s=>s.usersGroup||{}),K=j(s=>s.customization);t.useEffect(()=>{Z&&H(C(Z)),H(w()),H(z())},[H,Z]),t.useEffect(()=>{V&&Z&&(D({name:V.name||"",email:V.email||"",password:"",confirmPassword:"",userGroup:V.group_id||"",location:V.location||"",isSalesRep:V.isSalesRep||!1,street_address:V.street_address||"",city:V.city||"",state:V.state||"",zip_code:V.zip_code||"",country:V.country||"",company_name:V.company_name||"",company_street_address:V.company_street_address||"",company_city:V.company_city||"",company_state:V.company_state||"",company_zip_code:V.company_zip_code||"",company_country:V.company_country||""}),T.current={...T.current,name:V.name||"",email:V.email||"",userGroup:V.group_id||"",location:V.location||"",isSalesRep:V.isSalesRep||!1,street_address:V.street_address||"",city:V.city||"",state:V.state||"",zip_code:V.zip_code||"",country:V.country||"",company_name:V.company_name||"",company_street_address:V.company_street_address||"",company_city:V.company_city||"",company_state:V.company_state||"",company_zip_code:V.company_zip_code||"",company_country:V.company_country||""})},[V,Z]);const X=s=>{const{name:e,value:a,type:t,checked:n}=s.target;D(s=>({...s,[e]:"checkbox"===t?n:a}))};return s.jsxs(n,{fluid:!0,className:"settings-form-container",children:[s.jsx("style",{children:"\n        .settings-form-container .settings-section-card { border: 0; box-shadow: var(--shadow-sm, 0 1px 2px rgba(0,0,0,.06)); border-radius: var(--radius, 12px); }\n        .settings-form-container .settings-form-input { min-height: 44px; }\n        .settings-form-container .settings-form-cancel-btn,\n        .settings-form-container .settings-form-submit-btn { min-height: 44px; }\n        @media (max-width: 576px) {\n          .settings-form-container .settings-section-title { font-size: 0.95rem; }\n        }\n      "}),s.jsx(N,{title:I("settings.users.edit.title"),subtitle:I("settings.users.edit.subtitle"),icon:_,showBackButton:!0,onBackClick:()=>O("/settings/users")}),s.jsxs(r,{onSubmit:async s=>{if(s.preventDefault(),(()=>{const s={};return J.name.trim()||(s.name=I("settings.users.form.validation.nameRequired")),J.password!==J.confirmPassword&&(s.confirmPassword=I("settings.users.form.validation.passwordMismatch")),J.userGroup||(s.userGroup=I("settings.users.form.validation.userGroupRequired")),J.location.trim()||(s.location=I("settings.users.form.validation.locationRequired")),M(s),0===Object.keys(s).length})()){U(!0);try{const s=await H(P({id:Z,data:J}));200==s?.payload?.status&&(F.fire(I("common.success")+"!",s.payload.message,"success"),O("/settings/users"))}catch(e){F.fire(I("common.error"),e.message||I("settings.users.alerts.genericError"),"error")}finally{U(!1)}}},children:[s.jsx(i,{className:"settings-section-card",children:s.jsxs(o,{className:"p-3 p-md-4",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("div",{className:"settings-section-icon",children:s.jsx(c,{icon:_,size:"sm"})}),s.jsx("h6",{className:"settings-section-title",children:I("settings.users.form.titles.basicInfo")})]}),s.jsxs(l,{children:[s.jsx(m,{md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsxs(d,{htmlFor:"name",className:"settings-form-label",children:[I("settings.users.form.labels.fullName"),s.jsx("span",{className:"text-danger ms-1",children:"*"})]}),s.jsx(p,{id:"name",name:"name",value:J.name,onChange:X,invalid:!!L.name,className:"settings-form-input","aria-required":"true"}),s.jsx(u,{invalid:!0,children:L.name})]})}),s.jsx(m,{md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"email",className:"settings-form-label",children:I("settings.users.form.labels.email")}),s.jsx(p,{id:"email",name:"email",type:"email",value:J.email,disabled:!0,className:"settings-form-input",style:{cursor:"not-allowed",backgroundColor:"#e9ecef"},"aria-disabled":"true"})]})})]})]})}),s.jsx(i,{className:"settings-section-card",children:s.jsxs(o,{className:"p-3 p-md-4",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("div",{className:"settings-section-icon",children:s.jsx(c,{icon:R,size:"sm"})}),s.jsx("h6",{className:"settings-section-title",children:I("settings.users.form.titles.security")})]}),s.jsxs(l,{children:[s.jsx(m,{md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"password",className:"settings-form-label",children:I("settings.users.form.labels.password")}),s.jsx(p,{id:"password",name:"password",type:"password",value:J.password,onChange:X,invalid:!!L.password,className:"settings-form-input",placeholder:I("settings.users.form.placeholders.password"),"aria-describedby":"passwordHelp"}),s.jsx(u,{invalid:!0,children:L.password})]})}),s.jsx(m,{md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"confirmPassword",className:"settings-form-label",children:I("settings.users.form.labels.confirmPassword")}),s.jsx(p,{id:"confirmPassword",name:"confirmPassword",type:"password",value:J.confirmPassword,onChange:X,invalid:!!L.confirmPassword,className:"settings-form-input",placeholder:I("settings.users.form.placeholders.confirmPassword"),"aria-describedby":"confirmPasswordHelp"}),s.jsx(u,{invalid:!0,children:L.confirmPassword})]})})]})]})}),s.jsx(i,{className:"settings-section-card",children:s.jsxs(o,{className:"p-3 p-md-4",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("div",{className:"settings-section-icon",children:s.jsx(c,{icon:b,size:"sm"})}),s.jsx("h6",{className:"settings-section-title",children:I("settings.users.form.titles.details")})]}),s.jsxs(l,{children:[s.jsx(m,{md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsxs(d,{htmlFor:"userGroup",className:"settings-form-label",children:[I("settings.users.form.labels.userGroup"),s.jsx("span",{className:"text-danger ms-1",children:"*"})]}),s.jsxs(h,{id:"userGroup",name:"userGroup",value:J.userGroup,onChange:X,invalid:!!L.userGroup,className:"settings-form-input","aria-required":"true",children:[s.jsx("option",{value:"",children:I("settings.users.form.select.group")}),$.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),s.jsx(u,{invalid:!0,children:L.userGroup})]})}),s.jsx(m,{md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsxs(d,{htmlFor:"location",className:"settings-form-label",children:[I("settings.users.form.labels.location"),s.jsx("span",{className:"text-danger ms-1",children:"*"})]}),s.jsxs(h,{id:"location",name:"location",value:J.location,onChange:X,invalid:!!L.location,className:"settings-form-input","aria-required":"true",children:[s.jsx("option",{value:"",children:I("settings.users.form.select.location")}),W.map(e=>s.jsx("option",{value:e.id,children:e.address},e.id))]}),s.jsx(u,{invalid:!0,children:L.location})]})})]}),s.jsx("div",{className:"mb-3",children:s.jsx(x,{label:s.jsx("span",{className:"settings-form-label",children:I("settings.users.form.labels.salesRep")}),id:"isSalesRep",name:"isSalesRep",checked:J.isSalesRep,onChange:X,size:"lg",style:{transform:"scale(1.1)"},"aria-checked":J.isSalesRep})})]})}),s.jsx(i,{className:"settings-section-card",children:s.jsxs(o,{className:"p-3 p-md-4",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("div",{className:"settings-section-icon",children:s.jsx(c,{icon:G,size:"sm"})}),s.jsx("h6",{className:"settings-section-title",children:I("settings.users.form.titles.personalAddress","Personal Address")})]}),s.jsx(l,{children:s.jsx(m,{xs:12,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"street_address",className:"settings-form-label",children:I("settings.users.form.labels.streetAddress","Street Address")}),s.jsx(p,{type:"text",id:"street_address",name:"street_address",value:J.street_address,onChange:X,placeholder:I("settings.users.form.placeholders.streetAddress","Enter street address"),className:"settings-form-input"})]})})}),s.jsxs(l,{children:[s.jsx(m,{xs:12,md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"city",className:"settings-form-label",children:I("settings.users.form.labels.city","City")}),s.jsx(p,{type:"text",id:"city",name:"city",value:J.city,onChange:X,placeholder:I("settings.users.form.placeholders.city","Enter city"),className:"settings-form-input"})]})}),s.jsx(m,{xs:12,md:3,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"state",className:"settings-form-label",children:I("settings.users.form.labels.state","State/Province")}),s.jsx(p,{type:"text",id:"state",name:"state",value:J.state,onChange:X,placeholder:I("settings.users.form.placeholders.state","State"),className:"settings-form-input"})]})}),s.jsx(m,{xs:12,md:3,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"zip_code",className:"settings-form-label",children:I("settings.users.form.labels.zipCode","ZIP/Postal Code")}),s.jsx(p,{type:"text",id:"zip_code",name:"zip_code",value:J.zip_code,onChange:X,placeholder:I("settings.users.form.placeholders.zipCode","ZIP Code"),className:"settings-form-input"})]})})]}),s.jsx(l,{children:s.jsx(m,{xs:12,md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"country",className:"settings-form-label",children:I("settings.users.form.labels.country","Country")}),s.jsx(p,{type:"text",id:"country",name:"country",value:J.country,onChange:X,placeholder:I("settings.users.form.placeholders.country","Enter country"),className:"settings-form-input"})]})})})]})}),s.jsx(i,{className:"settings-section-card",children:s.jsxs(o,{className:"p-3 p-md-4",children:[s.jsxs("div",{className:"settings-section-header",children:[s.jsx("div",{className:"settings-section-icon",children:s.jsx(c,{icon:k,size:"sm"})}),s.jsx("h6",{className:"settings-section-title",children:I("settings.users.form.titles.companyInfo","Company Information")})]}),s.jsx(l,{children:s.jsx(m,{xs:12,md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"company_name",className:"settings-form-label",children:I("settings.users.form.labels.companyName","Company Name")}),s.jsx(p,{type:"text",id:"company_name",name:"company_name",value:J.company_name,onChange:X,placeholder:I("settings.users.form.placeholders.companyName","Enter company name"),className:"settings-form-input"})]})})}),s.jsx(l,{children:s.jsx(m,{xs:12,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"company_street_address",className:"settings-form-label",children:I("settings.users.form.labels.companyStreetAddress","Company Address")}),s.jsx(p,{type:"text",id:"company_street_address",name:"company_street_address",value:J.company_street_address,onChange:X,placeholder:I("settings.users.form.placeholders.companyStreetAddress","Enter company street address"),className:"settings-form-input"})]})})}),s.jsxs(l,{children:[s.jsx(m,{xs:12,md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"company_city",className:"settings-form-label",children:I("settings.users.form.labels.companyCity","Company City")}),s.jsx(p,{type:"text",id:"company_city",name:"company_city",value:J.company_city,onChange:X,placeholder:I("settings.users.form.placeholders.companyCity","Enter company city"),className:"settings-form-input"})]})}),s.jsx(m,{xs:12,md:3,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"company_state",className:"settings-form-label",children:I("settings.users.form.labels.companyState","Company State/Province")}),s.jsx(p,{type:"text",id:"company_state",name:"company_state",value:J.company_state,onChange:X,placeholder:I("settings.users.form.placeholders.companyState","State"),className:"settings-form-input"})]})}),s.jsx(m,{xs:12,md:3,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"company_zip_code",className:"settings-form-label",children:I("settings.users.form.labels.companyZipCode","Company ZIP/Postal Code")}),s.jsx(p,{type:"text",id:"company_zip_code",name:"company_zip_code",value:J.company_zip_code,onChange:X,placeholder:I("settings.users.form.placeholders.companyZipCode","ZIP Code"),className:"settings-form-input"})]})})]}),s.jsx(l,{children:s.jsx(m,{xs:12,md:6,children:s.jsxs("div",{className:"mb-3",children:[s.jsx(d,{htmlFor:"company_country",className:"settings-form-label",children:I("settings.users.form.labels.companyCountry","Company Country")}),s.jsx(p,{type:"text",id:"company_country",name:"company_country",value:J.company_country,onChange:X,placeholder:I("settings.users.form.placeholders.companyCountry","Enter company country"),className:"settings-form-input"})]})})})]})}),s.jsx(i,{className:"settings-form-actions",children:s.jsx(o,{className:"p-3 p-md-4",children:s.jsxs("div",{className:"d-flex flex-column flex-md-row gap-2 gap-md-3 justify-content-end",children:[s.jsxs(g,{type:"button",color:"light",className:"settings-form-cancel-btn order-2 order-md-1",onClick:()=>{JSON.stringify(J)!==JSON.stringify(T.current)?F.fire({title:I("common.confirm")||"Are you sure?",text:I("settings.users.form.alerts.leaveWarning"),icon:"warning",showCancelButton:!0,confirmButtonText:I("settings.users.form.alerts.leaveAnyway"),cancelButtonText:I("settings.users.form.alerts.stayOnPage"),confirmButtonColor:"#d33",cancelButtonColor:"#6c757d"}).then(s=>{s.isConfirmed&&O("/settings/users")}):O("/settings/users")},children:[s.jsx(c,{icon:B,className:"me-2"}),I("common.cancel")]}),s.jsx(g,{type:"submit",disabled:Q,className:"settings-form-submit-btn order-1 order-md-2",style:{backgroundColor:K?.headerBg||"#28a745",borderColor:K?.headerBg||"#28a745",color:S(K?.headerBg||"#28a745"),border:"none"},children:Q?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",style:{width:"14px",height:"14px"},children:s.jsx("span",{className:"visually-hidden",children:I("common.loading")})}),I("settings.users.edit.updating")]}):s.jsxs(s.Fragment,{children:[s.jsx(c,{icon:A,className:"me-2"}),I("settings.users.edit.update")]})})]})})})]})]})};export{I as default};
