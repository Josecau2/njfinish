import{j as e}from"./date-vendor-DfW9khhA.js";import{r as s}from"./react-vendor-Dhx0OYb2.js";import{a as r}from"./redux-vendor-B0DAdCYB.js";import{u as a,a as l}from"./index-BxG4qwLs.js";import{h as t,r as n,b as i,d as o,R as c,S as d,T as u,U as m,V as x,w as p,C as h,X as f,a3 as g,c as j,e as b,Y as v,v as y,i as w,j as k,k as C,l as N,m as L,a4 as S}from"./ui-vendor-pFEG3kEv.js";import{P as T}from"./PageHeader-UABCfWk-.js";import{w as A}from"./withContractorScope-bbtugTgT.js";import{c as z}from"./cil-globe-alt-6J7AfP2A.js";import{c as F}from"./cil-home-DjIzczOB.js";import{c as R}from"./cil-description-MUzg6O3n.js";import{c as B}from"./cil-chart-ul2n6BfS.js";import{c as H}from"./cil-magnifying-glass-CDkY_4k-.js";import{c as V}from"./cil-cloud-upload-Ca9_6_ej.js";import{c as M}from"./cil-plus-D8mtC-W5.js";import{c as D}from"./cil-pencil-m516yCOw.js";import{c as I}from"./cil-trash-CBbKHhHb.js";import"./form-vendor-C_vzjFiG.js";import"./utils-vendor-Nl-sF5xe.js";import"./icons-vendor-CVrEPnlB.js";import"./DefaultLayout-CDydDzk1.js";var Z=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M101.667,400H464V16H100.667A60.863,60.863,0,0,0,40,76.667V430.25h.011c0,.151-.011.3-.011.453,0,35.4,27.782,65.3,60.667,65.3H464V464H100.667C85.664,464,72,448.129,72,430.7,72,414.06,85.585,400,101.667,400ZM360,48.333V221.149l-48.4-42.49L264,220.9V48.333ZM232,48V264h31.641l48.075-42.659L360.305,264H392V48h40V368H136.08L136,48ZM100.667,48H104l.076,320h-2.413A59.793,59.793,0,0,0,72,375.883V76.917A28.825,28.825,0,0,1,100.667,48Z' class='ci-primary'/>"],q=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M472,472H40a24.028,24.028,0,0,1-24-24V64A24.028,24.028,0,0,1,40,40H226.667a23.935,23.935,0,0,1,22.154,14.77L269.333,104H472a24.028,24.028,0,0,1,24,24V448A24.028,24.028,0,0,1,472,472ZM48,440H464V136H248L221.333,72H48Z' class='ci-primary'/>"],E=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M457.47,55.833c-53.026-53.026-139.307-53.026-192.332,0L168.971,152,191.6,174.627,287.765,78.46A104,104,0,0,1,434.843,225.539l-96.167,96.167L361.3,344.333l96.167-96.167C510.5,195.14,510.5,108.86,457.47,55.833Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M225.539,434.843a104,104,0,0,1-147.078,0h0a104,104,0,0,1,0-147.078l90.511-90.511-22.627-22.627L55.833,265.138A136,136,0,1,0,248.166,457.47l90.51-90.51-22.627-22.627Z' class='ci-primary'/><rect width='320' height='32' x='93.824' y='243.48' fill='var(--ci-primary-color, currentColor)' class='ci-primary' transform='rotate(-45 253.823 259.48)'/>"];const P=({label:s,name:r,type:a="text",required:l=!1,icon:t=null,placeholder:i="",value:o,onChange:c,...d})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(S,{className:"fw-medium text-dark mb-2",children:[s,l&&e.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e.jsxs(u,{children:[t&&e.jsx(m,{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",border:"1px solid #e3e6f0",borderRight:"none",borderRadius:"10px 0 0 10px"},children:e.jsx(n,{icon:t,size:"sm",style:{color:"#6c757d"}})}),e.jsx(x,{name:r,type:a,value:o,onChange:c,placeholder:i,style:{border:"1px solid #e3e6f0",borderRadius:t?"0 10px 10px 0":"10px",fontSize:"14px",padding:"12px 16px",transition:"all 0.3s ease",borderLeft:t?"none":"1px solid #e3e6f0"},...d})]})]}),_=({label:s,name:r,required:a=!1,icon:l=null,children:t,value:i,onChange:o,...c})=>e.jsxs("div",{className:"mb-3",children:[e.jsxs(S,{className:"fw-medium text-dark mb-2",children:[s,a&&e.jsx("span",{className:"text-danger ms-1",children:"*"})]}),e.jsxs(u,{children:[l&&e.jsx(m,{style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",border:"1px solid #e3e6f0",borderRight:"none",borderRadius:"10px 0 0 10px"},children:e.jsx(n,{icon:l,size:"sm",style:{color:"#6c757d"}})}),e.jsx(p,{name:r,value:i,onChange:o,style:{border:"1px solid #e3e6f0",borderRadius:l?"0 10px 10px 0":"10px",fontSize:"14px",padding:"12px 16px",transition:"all 0.3s ease",borderLeft:l?"none":"1px solid #e3e6f0"},...c,children:t})]})]}),W=A(({isContractor:S,contractorGroupId:A,contractorModules:W,contractorGroupName:$})=>{const{t:G}=a(),Y=r(e=>e.customization),[U,X]=s.useState([]),[J,K]=s.useState([]),O=e=>{if(!e)return"#ffffff";const s=e.replace("#","");return(.299*parseInt(s.substr(0,2),16)+.587*parseInt(s.substr(2,2),16)+.114*parseInt(s.substr(4,2),16))/255>.5?"#2d3748":"#ffffff"},[Q,ee]=s.useState([]),[se,re]=s.useState([]),[ae,le]=s.useState(""),[te,ne]=s.useState("all"),[ie,oe]=s.useState("all"),[ce,de]=s.useState(!0),[ue,me]=s.useState(!1),[xe,pe]=s.useState(!1),[he,fe]=s.useState(null),[ge,je]=s.useState(null),[be,ve]=s.useState(!1),[ye,we]=s.useState({title:"",url:"",type:"external"}),[ke,Ce]=s.useState({name:"",file:null,type:"pdf"}),Ne=[{value:"external",label:G("resources.linkType.external"),icon:z},{value:"internal",label:G("resources.linkType.internal"),icon:F},{value:"document",label:G("resources.linkType.document"),icon:Z},{value:"help",label:G("resources.linkType.help"),icon:Z}],Le=[{value:"pdf",label:G("resources.fileType.pdf"),icon:R},{value:"excel",label:G("resources.fileType.excel"),icon:B},{value:"word",label:G("resources.fileType.word"),icon:R},{value:"video",label:G("resources.fileType.video"),icon:R},{value:"image",label:G("resources.fileType.image"),icon:R},{value:"other",label:G("resources.fileType.other"),icon:R}],Se=e=>{switch(e){case"external":case"word":return"primary";case"internal":case"excel":return"success";case"document":case"image":return"info";case"help":return"warning";case"pdf":return"danger";case"video":return"dark";default:return"secondary"}},Te=(e,s=!1)=>{if(s){const s=Le.find(s=>s.value===e);return s?s.icon:R}{const s=Ne.find(s=>s.value===e);return s?s.icon:E}};s.useEffect(()=>{S&&(async()=>{try{de(!0);const e=localStorage.getItem("token"),s=await l.get("/api/resources?scope=contractor",{headers:{Authorization:`Bearer ${e}`}});s.data.success&&(X(s.data.data.links),K(s.data.data.files),ee(s.data.data.links),re(s.data.data.files))}catch(e){}finally{de(!1)}})()},[S]),s.useEffect(()=>{(()=>{let e=U,s=J;ae&&(e=e.filter(e=>e.title.toLowerCase().includes(ae.toLowerCase())||e.url.toLowerCase().includes(ae.toLowerCase())),s=s.filter(e=>e.name.toLowerCase().includes(ae.toLowerCase())||e.original_name.toLowerCase().includes(ae.toLowerCase()))),"all"!==te&&(e=e.filter(e=>e.type===te)),"all"!==ie&&(s=s.filter(e=>e.type===ie)),ee(e),re(s)})()},[ae,te,ie,U,J]);const Ae=()=>{},ze=e=>{},Fe=e=>{},Re=()=>{},Be=e=>{},He=e=>{},Ve=e=>{window.open(e.url,"_blank")},Me=({title:s,icon:r,children:a,gradient:l,onAddClick:t,addButtonText:c,emptyStateIcon:d,emptyStateText:u,emptyStateSubtext:m,showAddButton:x=!0})=>e.jsxs(i,{className:"border-0 shadow-sm mb-2 h-100",style:{borderRadius:"16px"},children:[e.jsx(j,{className:"border-0 pb-2",style:{background:l,borderRadius:"5px 5px 0 0",padding:"1.5rem"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-3",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"50px",height:"50px",backgroundColor:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:e.jsx(n,{icon:r,size:"lg",className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white mb-1 fw-bold",children:s}),e.jsx("p",{className:"text-white-50 mb-0 small",children:G("resources.manage",{title:s})})]})]}),x&&t&&e.jsxs(b,{color:"light",className:"shadow-sm fw-semibold",onClick:t,style:{borderRadius:"12px",border:"none",padding:"8px 20px",minWidth:"120px"},children:[e.jsx(n,{icon:M,className:"me-2",size:"sm"}),c]})]})}),e.jsx(o,{className:"p-0",children:a})]}),De=({icon:s,title:r,subtitle:a,onAddClick:l,buttonText:t,showButton:i=!0})=>e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"d-inline-flex align-items-center justify-content-center rounded-circle mb-3",style:{width:"80px",height:"80px",backgroundColor:"#f1f5f9",opacity:.7},children:e.jsx(n,{icon:s,size:"xl",style:{color:"#94a3b8"}})}),e.jsx("h6",{className:"text-muted mb-2",children:r}),e.jsx("p",{className:"text-muted small mb-3",children:a}),i&&l&&e.jsxs(b,{variant:"outline",color:"primary",onClick:l,style:{borderRadius:"12px",border:"2px solid #e2e8f0",padding:"8px 20px"},children:[e.jsx(n,{icon:M,className:"me-2",size:"sm"}),t]})]}),Ie=({item:s,isFile:r=!1,onEdit:a,onDelete:l,onDownload:t,isContractor:i=!1})=>e.jsx(v,{className:"border-0 px-4 py-3",style:{borderBottom:"1px solid #f1f5f9",transition:"all 0.2s ease"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{className:"d-flex align-items-start flex-grow-1",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3 flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:`var(--cui-${Se(s.type)}-100, #f1f5f9)`,color:`var(--cui-${Se(s.type)}, #6366f1)`},children:e.jsx(n,{icon:Te(s.type,r),size:"sm"})}),e.jsxs("div",{className:"flex-grow-1 min-width-0",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2 flex-wrap gap-2",children:[e.jsx("h6",{className:"mb-0 fw-semibold text-dark text-truncate",children:r?s.original_name||s.name:s.title}),e.jsx(y,{color:Se(s.type),shape:"rounded-pill",className:"small",children:s.type})]}),!r&&e.jsx("p",{className:"text-muted small mb-1 text-truncate",children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none",children:s.url})}),r&&e.jsxs("p",{className:"text-muted small mb-1",children:[G("resources.size"),": ",s.size]}),e.jsxs("small",{className:"text-muted",children:[G(r?"resources.uploaded":"resources.added"),": ",new Date(r?s.uploadedAt:s.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"d-flex gap-1 ms-2 flex-shrink-0",children:[r&&t&&e.jsx(b,{size:"sm",variant:"ghost",color:"success",onClick:()=>t(s),style:{borderRadius:"8px",padding:"6px 8px",border:"1px solid transparent",transition:"all 0.2s ease"},className:"hover-shadow",title:G("resources.downloadFile"),children:e.jsx(n,{icon:z,size:"sm"})}),!r&&!i&&e.jsx(b,{size:"sm",variant:"ghost",color:"info",onClick:()=>window.open(s.url,"_blank"),style:{borderRadius:"8px",padding:"6px 8px",border:"1px solid transparent",transition:"all 0.2s ease"},className:"hover-shadow",title:G("resources.openLink"),children:e.jsx(n,{icon:z,size:"sm"})}),!i&&a&&e.jsx(b,{size:"sm",variant:"ghost",color:"primary",onClick:()=>a(s),style:{borderRadius:"8px",padding:"6px 8px",border:"1px solid transparent",transition:"all 0.2s ease"},className:"hover-shadow",title:G("common.edit"),children:e.jsx(n,{icon:D,size:"sm"})}),!i&&l&&e.jsx(b,{size:"sm",variant:"ghost",color:"danger",onClick:()=>l(s.id),style:{borderRadius:"8px",padding:"6px 8px",border:"1px solid transparent",transition:"all 0.2s ease"},className:"hover-shadow",title:G("common.delete"),children:e.jsx(n,{icon:I,size:"sm"})})]})]})}),Ze=({visible:s,onClose:r,title:a,children:l,onSave:t,saveButtonText:n,isLoading:i})=>e.jsxs(w,{visible:s,onClose:r,size:"lg",className:"modern-modal",children:[e.jsx(k,{style:{borderRadius:"16px 16px 0 0",background:Y.headerBg||"#667eea",color:O(Y.headerBg||"#667eea"),border:"none"},children:e.jsx(C,{className:"fw-bold text-white",children:a})}),e.jsx(N,{className:"p-4",style:{backgroundColor:"#fafbfc"},children:l}),e.jsxs(L,{style:{borderRadius:"0 0 16px 16px",backgroundColor:"#fafbfc",border:"none",padding:"1.5rem"},children:[e.jsx(b,{color:"light",onClick:r,style:{borderRadius:"12px",fontWeight:"600",padding:"8px 20px",border:"1px solid #e3e6f0"},children:G("common.cancel")}),e.jsxs(b,{style:{background:Y.headerBg||"#667eea",color:O(Y.headerBg||"#667eea"),border:"none",borderRadius:"12px",fontWeight:"600",padding:"8px 24px"},onClick:t,disabled:i,children:[i&&e.jsx(h,{size:"sm",className:"me-2"}),n]})]})]});return e.jsxs(t,{fluid:!0,className:"p-2 p-md-4",style:{backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsx("style",{children:"\n                    .hover-shadow:hover {\n                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;\n                        transform: translateY(-1px);\n                    }\n                    \n                    .modern-modal .modal-content {\n                        border-radius: 16px !important;\n                        border: none !important;\n                        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;\n                    }\n                    \n                    @media (max-width: 768px) {\n                        .d-flex.justify-content-between.align-items-center.flex-wrap {\n                            flex-direction: column;\n                            align-items: flex-start !important;\n                            gap: 1rem;\n                        }\n                        \n                        .d-flex.gap-1.ms-2.flex-shrink-0 {\n                            margin-left: 0 !important;\n                            margin-top: 0.5rem;\n                        }\n                        \n                        .min-width-0 {\n                            min-width: 0;\n                            width: 100%;\n                        }\n                        \n                        .text-truncate {\n                            max-width: 200px;\n                        }\n                    }\n                    \n                    @media (max-width: 576px) {\n                        .px-4 {\n                            padding-left: 1rem !important;\n                            padding-right: 1rem !important;\n                        }\n                        \n                        .flex-wrap.gap-3 > div:first-child {\n                            width: 100%;\n                        }\n                        \n                        .flex-wrap.gap-3 > div:last-child {\n                            width: 100%;\n                            text-align: center;\n                        }\n                    }\n                "}),e.jsx(T,{title:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px"},children:e.jsx(n,{icon:q,style:{fontSize:"32px",color:"white"}})}),G("nav.resources")]}),subtitle:G(S?"resources.headerContractor":"resources.headerAdmin")}),e.jsx(i,{className:"border-0 shadow-sm mb-4",children:e.jsx(o,{children:e.jsxs(c,{className:"g-3",children:[e.jsx(d,{md:6,children:e.jsxs(u,{children:[e.jsx(m,{children:e.jsx(n,{icon:H})}),e.jsx(x,{placeholder:G("resources.searchPlaceholder"),value:ae,onChange:e=>le(e.target.value)})]})}),e.jsx(d,{md:3,children:e.jsxs(p,{value:te,onChange:e=>ne(e.target.value),children:[e.jsx("option",{value:"all",children:G("resources.allLinkTypes")}),Ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})}),e.jsx(d,{md:3,children:e.jsxs(p,{value:ie,onChange:e=>oe(e.target.value),children:[e.jsx("option",{value:"all",children:G("resources.allFileTypes")}),Le.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})})]})})}),e.jsx(c,{className:"g-4",children:ce?e.jsxs(d,{className:"text-center py-5",children:[e.jsx(h,{color:"primary"}),e.jsx("div",{className:"mt-3 text-muted",children:G("resources.loading")})]}):e.jsxs(e.Fragment,{children:[e.jsx(d,{lg:6,className:"mb-4",children:e.jsx(Me,{title:G("resources.links"),icon:E,gradient:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",onAddClick:S?null:Ae,addButtonText:G("resources.addLink"),emptyStateIcon:E,emptyStateText:G("resources.noLinks"),emptyStateSubtext:G(S?"resources.noLinksContractor":"resources.noLinksAdmin"),showAddButton:!S,children:0===Q.length?e.jsx(De,{icon:E,title:G("resources.noLinks"),subtitle:G(S?"resources.noLinksContractor":"resources.noLinksAdminAlt"),onAddClick:S?null:Ae,buttonText:G("resources.addFirstLink"),showButton:!S}):e.jsx(f,{flush:!0,children:Q.map(s=>e.jsx(Ie,{item:s,isFile:!1,onEdit:S?null:ze,onDelete:S?null:Fe,isContractor:S},s.id))})})}),e.jsx(d,{lg:6,className:"mb-4",children:e.jsx(Me,{title:G("resources.files"),icon:q,gradient:"linear-gradient(135deg, #10b981 0%, #059669 100%)",onAddClick:S?null:Re,addButtonText:G("resources.addFile"),emptyStateIcon:q,emptyStateText:G("resources.noFiles"),emptyStateSubtext:G(S?"resources.noFilesContractor":"resources.noFilesAdmin"),showAddButton:!S,children:0===se.length?e.jsx(De,{icon:V,title:G("resources.noFiles"),subtitle:G(S?"resources.noFilesContractor":"resources.noFilesAdminAlt"),onAddClick:S?null:Re,buttonText:G("resources.uploadFirstFile"),showButton:!S}):e.jsx(f,{flush:!0,children:se.map(s=>e.jsx(Ie,{item:s,isFile:!0,onEdit:S?null:Be,onDelete:S?null:He,onDownload:Ve,isContractor:S},s.id))})})})]})}),!S&&e.jsxs(e.Fragment,{children:[e.jsx(Ze,{visible:ue,onClose:()=>{me(!1),we({title:"",url:"",type:"external"}),fe(null)},title:G(he?"resources.editLink":"resources.addNewLink"),onSave:()=>{},saveButtonText:G(he?"resources.updateLink":"resources.addLink"),isLoading:be,children:e.jsxs(g,{children:[e.jsx(P,{label:G("resources.linkTitle"),name:"title",required:!0,icon:E,placeholder:G("resources.enterLinkTitle"),value:ye.title,onChange:e=>we({...ye,title:e.target.value})}),e.jsx(P,{label:G("resources.url"),name:"url",type:"url",required:!0,icon:z,placeholder:G("resources.urlPlaceholder"),value:ye.url,onChange:e=>we({...ye,url:e.target.value})}),e.jsx(_,{label:G("resources.linkType.label"),name:"type",icon:Z,value:ye.type,onChange:e=>we({...ye,type:e.target.value}),children:Ne.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})}),e.jsx(Ze,{visible:xe,onClose:()=>{pe(!1),Ce({name:"",file:null,type:"pdf"}),je(null)},title:G(ge?"resources.editFile":"resources.uploadNewFile"),onSave:()=>{},saveButtonText:G(ge?"resources.updateFile":"resources.uploadFile"),isLoading:be,children:e.jsxs(g,{children:[e.jsx(P,{label:G("resources.file"),name:"file",type:"file",required:!ge,icon:V,onChange:e=>{},accept:".pdf,.doc,.docx,.xls,.xlsx,.csv,.mp4,.avi,.mov,.jpg,.jpeg,.png,.gif"}),ge&&e.jsx("small",{className:"text-muted d-block mb-3",children:G("resources.leaveEmpty")}),e.jsx(P,{label:G("resources.fileName"),name:"name",required:!0,icon:R,placeholder:G("resources.enterFileName"),value:ke.name,onChange:e=>Ce({...ke,name:e.target.value})}),e.jsx(_,{label:G("resources.fileType.label"),name:"type",icon:B,value:ke.type,onChange:e=>Ce({...ke,type:e.target.value}),children:Le.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})})]})]})},"resources");export{W as default};
