import{j as e}from"./date-vendor-DfW9khhA.js";import{u as s,r as o}from"./react-vendor-Dhx0OYb2.js";import{S as i}from"./utils-vendor-Nl-sF5xe.js";import{u as t}from"./index-BmZAsEKv.js";import{f as a,g as n}from"./dateHelpers-CEeK98s8.js";import{u as l,T as r}from"./index-CRxBN8Fj.js";import{u as d}from"./redux-vendor-B0DAdCYB.js";import{h as c,e as m,r as x,b as f,d as p,a3 as h,R as g,S as j,a4 as u,T as b,U as y,V as v,a7 as N,w}from"./ui-vendor-pFEG3kEv.js";import{P as k}from"./PageHeader-UABCfWk-.js";import{c as C}from"./cil-arrow-left-D66Kb3Zq.js";import{a as z}from"./DefaultLayout-CNvO87EM.js";import{c as S}from"./cil-home-DjIzczOB.js";import{c as R}from"./cil-envelope-closed-DSbcONbs.js";import{c as _}from"./cil-phone-4mwkG2LD.js";import{c as L,a as T}from"./cil-clock-BhwNMOcP.js";import"./form-vendor-C_vzjFiG.js";import"./icons-vendor-CVrEPnlB.js";const O={locationName:"",address:"",website:"",email:"",phone:"",country:"",timezone:""},q=()=>{const{t:q}=l(),B=s(),[I,D]=o.useState(O),E=o.useRef(O),[H,P]=o.useState({}),[U,A]=o.useState(""),[F,J]=o.useState(!1),W=d(),$=Object.values(t.getAllCountries()),Q=I.country&&t.getCountry(I.country)?.timezones||[];o.useEffect(()=>{if(I.timezone){const e=setInterval(()=>{A(a(n(),I.timezone))},1e3);return()=>clearInterval(e)}},[I.timezone]);const V=e=>{const{name:s,value:o}=e.target;if("country"===s){const e=(t.getCountry(o)?.timezones||[])[0]||"";return D(s=>({...s,country:o,timezone:e})),void A(e?a(n(),e):"")}D(e=>({...e,[s]:o}))};return e.jsxs(c,{fluid:!0,className:"p-2 m-2",style:{backgroundColor:"#f8fafc",minHeight:"100vh"},children:[e.jsx(k,{title:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"48px",height:"48px",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"12px"},children:e.jsx(x,{icon:z,style:{fontSize:"24px",color:"white"}})}),q("settings.locations.create.title")]}),subtitle:q("settings.locations.create.subtitle"),rightContent:e.jsx(m,{color:"light",variant:"ghost",className:"p-2",onClick:()=>B("/settings/locations"),style:{borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.2)",border:"1px solid rgba(255,255,255,0.3)",color:"white"},children:e.jsx(x,{icon:C})})}),e.jsx(f,{className:"border-0 shadow-sm",children:e.jsx(p,{className:"p-4",children:e.jsxs(h,{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return I.locationName.trim()||(e.locationName=q("settings.locations.form.validation.locationNameRequired")),I.address.trim()||(e.address=q("settings.locations.form.validation.addressRequired")),I.website.trim()||(e.website=q("settings.locations.form.validation.websiteRequired")),I.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email)||(e.email=q("settings.locations.form.validation.invalidEmail")):e.email=q("settings.locations.form.validation.emailRequired"),I.phone.trim()||(e.phone=q("settings.locations.form.validation.phoneRequired")),I.country||(e.country=q("settings.locations.form.validation.countryRequired")),I.timezone||(e.timezone=q("settings.locations.form.validation.timezoneRequired")),P(e),0===Object.keys(e).length})()){J(!0);try{200==(await W(r(I))).payload.status&&(i.fire({title:q("settings.locations.alerts.savedTitle"),text:q("settings.locations.alerts.savedText"),icon:"success",confirmButtonColor:"#28a745",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}}),B("/settings/locations"))}catch(s){i.fire({title:q("common.error"),text:s.message||q("settings.locations.alerts.genericError"),icon:"error",confirmButtonColor:"#dc3545"})}finally{J(!1)}}},children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"mb-3 text-dark fw-semibold d-flex align-items-center gap-2",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",backgroundColor:"#e7f3ff",borderRadius:"8px",color:"#0d6efd"},children:e.jsx(x,{icon:S,size:"sm"})}),q("settings.locations.form.titles.basicInfo")]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[q("settings.locations.form.labels.locationName"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:z,className:"text-primary"})}),e.jsx(v,{name:"locationName",value:I.locationName,onChange:V,invalid:!!H.locationName,placeholder:q("settings.locations.form.placeholders.locationName"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),H.locationName&&e.jsx(N,{invalid:!0,style:{display:"block"},children:H.locationName})]}),e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[q("settings.locations.form.labels.address"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:S,className:"text-success"})}),e.jsx(v,{name:"address",value:I.address,onChange:V,invalid:!!H.address,placeholder:q("settings.locations.form.placeholders.address"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),H.address&&e.jsx(N,{invalid:!0,style:{display:"block"},children:H.address})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"mb-3 text-dark fw-semibold d-flex align-items-center gap-2",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",backgroundColor:"#e6f7e6",borderRadius:"8px",color:"#28a745"},children:e.jsx(x,{icon:R,size:"sm"})}),q("settings.locations.form.titles.contactInfo")]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[q("settings.locations.form.labels.website"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:R,className:"text-info"})}),e.jsx(v,{name:"website",value:I.website,onChange:V,invalid:!!H.website,placeholder:q("settings.locations.form.placeholders.website"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),H.website&&e.jsx(N,{invalid:!0,style:{display:"block"},children:H.website})]}),e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[q("settings.locations.form.labels.email"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:R,className:"text-warning"})}),e.jsx(v,{name:"email",type:"email",value:I.email,onChange:V,invalid:!!H.email,placeholder:q("settings.locations.form.placeholders.email"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),H.email&&e.jsx(N,{invalid:!0,style:{display:"block"},children:H.email})]})]}),e.jsx(g,{className:"mb-3",children:e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[q("settings.locations.form.labels.phone"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0"},children:e.jsx(x,{icon:_,className:"text-success"})}),e.jsx(v,{name:"phone",type:"tel",value:I.phone,onChange:V,invalid:!!H.phone,placeholder:q("settings.locations.form.placeholders.phone"),style:{border:"1px solid #e3e6f0",borderLeft:"none",fontSize:"14px",padding:"12px 16px"}})]}),H.phone&&e.jsx(N,{invalid:!0,style:{display:"block"},children:H.phone})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h5",{className:"mb-3 text-dark fw-semibold d-flex align-items-center gap-2",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px",backgroundColor:"#fff3cd",borderRadius:"8px",color:"#856404"},children:e.jsx(x,{icon:L,size:"sm"})}),q("settings.locations.form.titles.locationTime")]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[q("settings.locations.form.labels.country"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(w,{name:"country",value:I.country,onChange:V,invalid:!!H.country,style:{border:"1px solid #e3e6f0",borderRadius:"8px",fontSize:"14px",padding:"12px 16px"},children:[e.jsx("option",{value:"",children:q("settings.locations.form.select.country")}),$.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),H.country&&e.jsx(N,{invalid:!0,style:{display:"block"},children:H.country})]}),e.jsxs(j,{md:6,children:[e.jsxs(u,{className:"fw-semibold text-dark",children:[q("settings.locations.form.labels.timezone"),e.jsx("span",{style:{color:"#dc3545",marginLeft:"4px"},children:"*"})]}),e.jsxs(w,{name:"timezone",value:I.timezone,onChange:V,invalid:!!H.timezone,disabled:!I.country,style:{border:"1px solid #e3e6f0",borderRadius:"8px",fontSize:"14px",padding:"12px 16px",backgroundColor:I.country?"white":"#f8f9fa"},children:[e.jsx("option",{value:"",children:q("settings.locations.form.select.timezone")}),Q.map(s=>e.jsx("option",{value:s,children:s},s))]}),H.timezone&&e.jsx(N,{invalid:!0,style:{display:"block"},children:H.timezone})]})]}),U&&e.jsx(g,{className:"mb-3",children:e.jsxs(j,{md:6,children:[e.jsx(u,{className:"fw-semibold text-dark",children:q("settings.locations.form.labels.currentTime")}),e.jsxs(b,{children:[e.jsx(y,{style:{backgroundColor:"#e7f3ff",border:"1px solid #b6d7ff"},children:e.jsx(x,{icon:L,className:"text-primary"})}),e.jsx(v,{value:U,readOnly:!0,tabIndex:-1,style:{backgroundColor:"#f8f9fa",border:"1px solid #e3e6f0",borderLeft:"none",cursor:"not-allowed",fontSize:"14px",fontWeight:"500",color:"#495057"}})]}),e.jsx("small",{className:"text-muted",children:q("settings.locations.form.hints.liveTime")})]})})]}),e.jsx("hr",{className:"my-4",style:{border:"1px solid #e3e6f0"}}),e.jsxs("div",{className:"d-flex gap-3 justify-content-end",children:[e.jsxs(m,{type:"button",color:"light",onClick:()=>{JSON.stringify(I)!==JSON.stringify(E.current)?i.fire({title:q("common.confirm"),text:q("settings.locations.alerts.leaveWarning"),icon:"warning",showCancelButton:!0,confirmButtonText:q("settings.locations.alerts.leaveAnyway"),cancelButtonText:q("settings.locations.alerts.stayOnPage"),confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}}).then(e=>{e.isConfirmed&&B("/settings/locations")}):B("/settings/locations")},className:"px-4 py-2 fw-semibold",style:{border:"1px solid #e3e6f0",borderRadius:"8px",color:"#6c757d"},children:[e.jsx(x,{icon:C,className:"me-2"}),q("common.cancel")]}),e.jsx(m,{type:"submit",color:"success",disabled:F,className:"px-4 py-2 fw-semibold",style:{border:"none",borderRadius:"8px",background:F?"#6c757d":"linear-gradient(45deg, #28a745, #20c997)",boxShadow:"0 2px 4px rgba(40, 167, 69, 0.2)"},children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:e.jsx("span",{className:"visually-hidden",children:q("common.loading")})}),q("settings.locations.create.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{icon:T,className:"me-2"}),q("settings.locations.create.submit")]})})]})]})})})]})};export{q as default};
