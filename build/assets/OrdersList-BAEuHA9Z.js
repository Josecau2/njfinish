import{j as e}from"./date-vendor-DfW9khhA.js";import{r as s,u as r}from"./react-vendor-Dhx0OYb2.js";import{u as a,a as t}from"./redux-vendor-B0DAdCYB.js";import{h as c,b as o,d as l,R as d,S as n,T as i,U as m,r as h,V as u,Z as p,_ as x,$ as j,a0 as g,a1 as f,a2 as v,v as N}from"./ui-vendor-pFEG3kEv.js";import{P}from"./PageHeader-UABCfWk-.js";import{l as y}from"./index-CN1WxwnF.js";import{P as b}from"./PaginationComponent-D6Bf1rUy.js";import{u as C,a3 as S}from"./index-CRxBN8Fj.js";import{c as w}from"./cil-search-CDkY_4k-.js";const A=({title:A,subtitle:L,groupId:M=null,isContractor:$=!1})=>{const{t:k}=C(),D=a(),{data:I,loading:R}=t(e=>e.proposal),[U,q]=s.useState(""),[z,E]=s.useState(1),H=r();s.useEffect(()=>{D(S({groupId:M}))},[D,M]);const O=s.useMemo(()=>{const e=Array.isArray(I)?I:[];return e.filter(e=>{return!!(s=e.status)&&("accepted"===String(s).toLowerCase()||"Proposal accepted"===s);var s}).filter(e=>(e.customer?.name||"").toLowerCase().includes(U.toLowerCase()))},[I,U]),Q=s.useMemo(()=>{const e=10*(z-1);return O.slice(e,e+10)},[O,z]);return e.jsxs(c,{fluid:!0,children:[e.jsx(P,{title:A,subtitle:L,icon:y}),e.jsx(o,{className:"filter-card",children:e.jsx(l,{children:e.jsxs(d,{className:"align-items-center g-3",children:[e.jsx(n,{md:8,children:e.jsxs(i,{children:[e.jsx(m,{children:e.jsx(h,{icon:w})}),e.jsx(u,{placeholder:k("orders.searchPlaceholder","Search by customer"),value:U,onChange:e=>q(e.target.value)})]})}),e.jsx(n,{md:4,className:"text-md-end",children:e.jsx("small",{className:"text-muted",children:k("orders.showingCount",{count:O.length,total:Array.isArray(I)?I.length:0})})})]})})}),e.jsx(o,{className:"data-table-card",children:e.jsxs(p,{hover:!0,children:[e.jsx(x,{children:e.jsxs(j,{children:[e.jsx(g,{children:k("proposals.headers.date")}),e.jsx(g,{children:k("proposals.headers.customer")}),e.jsx(g,{children:k("proposals.headers.description")}),e.jsx(g,{children:k("proposals.headers.status")})]})}),e.jsx(f,{children:0===Q.length?e.jsx(j,{children:e.jsxs(v,{colSpan:4,className:"text-center py-5",children:[e.jsx(h,{icon:w,size:"3xl",className:"text-muted mb-3"}),e.jsx("p",{className:"mb-0",children:k("orders.empty.title","No orders found")}),e.jsx("small",{className:"text-muted",children:k("orders.empty.subtitle","Accepted & locked quotes will appear here")})]})}):Q.map(s=>{return e.jsxs(j,{onClick:()=>{return e=s.id,void H(`${$?"/my-orders":"/orders"}/${e}`);var e},style:{cursor:"pointer"},children:[e.jsx(v,{children:new Date(s.date||s.createdAt).toLocaleDateString()}),e.jsx(v,{children:s.customer?.name||k("common.na")}),e.jsx(v,{className:"text-muted",children:s.description||k("common.na")}),e.jsx(v,{children:e.jsx(N,{color:(r=s.status||"accepted",{accepted:"success","Proposal accepted":"success",sent:"info",draft:"secondary"}[r]||"success"),shape:"rounded-pill",children:s.status||"accepted"})})]},s.id);var r})})]})}),e.jsx(o,{className:"data-table-card mt-4",children:e.jsx(l,{children:e.jsx(b,{currentPage:z,totalPages:Math.ceil(O.length/10)||1,onPageChange:E,itemsPerPage:10})})})]})};export{A as O};
