import{j as s}from"./date-vendor-DfW9khhA.js";import{r as e,u as t}from"./react-vendor-Dhx0OYb2.js";import{h as i,e as a,r as n,R as l,S as r,b as c,d,T as m,U as o,V as x,C as g,Z as h,_ as j,$ as u,a0 as N,a1 as p,a2 as f,v as b}from"./ui-vendor-pFEG3kEv.js";import{u as v,w as y,g as w,m as C,M as z}from"./index-CRxBN8Fj.js";import{u as P,a as S}from"./redux-vendor-B0DAdCYB.js";import{S as k}from"./utils-vendor-Nl-sF5xe.js";import{P as T}from"./PaginationComponent-D6Bf1rUy.js";import{P as B}from"./PageHeader-UABCfWk-.js";import{c as L}from"./cil-user-plus-9sfVD_63.js";import{b as U,c as M}from"./DefaultLayout-CNvO87EM.js";import{c as R}from"./cil-search-CDkY_4k-.js";import{c as A}from"./cil-pencil-m516yCOw.js";import{c as G}from"./cil-trash-CBbKHhHb.js";import"./form-vendor-C_vzjFiG.js";import"./icons-vendor-CVrEPnlB.js";const $=()=>{const[$,D]=e.useState(""),[E,I]=e.useState(1),[W,Y]=e.useState(10),Z=t(),F=P(),{list:H,loading:J,error:O}=S(s=>s.users),{t:Q}=v();let V=JSON.parse(localStorage.getItem("user")).userId;e.useEffect(()=>{F(y())},[F]);const X=H.filter(s=>s&&s.name&&s.email).filter(s=>s.id!==V).filter(s=>s.name.toLowerCase().includes($.toLowerCase())||s.email.toLowerCase().includes($.toLowerCase())),_=Math.ceil((X.length||0)/W),q=X?.slice((E-1)*W,E*W),K=(E-1)*W+1;Math.min(E*W,X.length);const ss=s=>{const e=`/${w(6)}/${w(8)}`+C("/settings/users/edit/:id",{id:s});Z(e)},es=s=>{k.fire({title:Q("settings.users.confirm.title"),text:Q("settings.users.confirm.text"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:Q("settings.users.confirm.confirmYes"),cancelButtonText:Q("common.cancel")}).then(async e=>{if(e.isConfirmed)try{await F(z(s)).unwrap(),k.fire(Q("common.deleted")+"!",Q("settings.users.confirm.deletedText"),"success")}catch(t){k.fire(Q("common.error")+"!",Q("settings.users.confirm.errorText"),"error")}else e.dismiss===k.DismissReason.cancel&&k.fire(Q("settings.users.confirm.cancelledTitle"),Q("settings.users.confirm.cancelledText"),"info")})},ts=s=>({Admin:"primary",Manager:"success",User:"secondary",Editor:"warning"}[s]||"secondary"),is=X.filter(s=>"Admin"===s.role).length,as=X.filter(s=>"Admin"!==s.role).length;return s.jsxs(i,{fluid:!0,className:"settings-container",children:[s.jsx(B,{title:Q("settings.users.header"),subtitle:Q("settings.users.subtitle"),rightContent:s.jsxs("div",{className:"d-flex gap-2",children:[s.jsxs(a,{color:"light",className:"settings-action-button",onClick:()=>{Z("/settings/users/create")},children:[s.jsx(n,{icon:L,className:"me-2"}),Q("settings.users.addUser")]}),s.jsxs(a,{color:"success",className:"settings-action-button success",onClick:()=>{Z("/settings/users/group/create")},children:[s.jsx(n,{icon:U,className:"me-2"}),Q("settings.users.addGroup")]})]})}),s.jsxs(l,{className:"mb-2",children:[s.jsx(r,{md:4,children:s.jsx(c,{className:"settings-stats-card",children:s.jsx(d,{children:s.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[s.jsx("div",{className:"settings-stat-icon primary",children:s.jsx(n,{icon:M,size:"lg"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-0 fw-bold text-primary",children:X.length}),s.jsx("small",{className:"text-muted",children:Q("settings.users.stats.totalUsers")})]})]})})})}),s.jsx(r,{md:4,children:s.jsx(c,{className:"settings-stats-card",children:s.jsx(d,{children:s.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[s.jsx("div",{className:"settings-stat-icon success",children:s.jsx(n,{icon:U,size:"lg"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-0 fw-bold text-success",children:is}),s.jsx("small",{className:"text-muted",children:Q("settings.users.stats.administrators")})]})]})})})}),s.jsx(r,{md:4,children:s.jsx(c,{className:"settings-stats-card",children:s.jsx(d,{children:s.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[s.jsx("div",{className:"settings-stat-icon warning",children:s.jsx(n,{icon:M,size:"lg"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-0 fw-bold text-warning",children:as}),s.jsx("small",{className:"text-muted",children:Q("settings.users.stats.regularUsers")})]})]})})})})]}),s.jsx(c,{className:"settings-search-card",children:s.jsx(d,{children:s.jsxs(l,{className:"align-items-center",children:[s.jsx(r,{md:6,lg:4,children:s.jsxs(m,{children:[s.jsx(o,{style:{background:"none",border:"none"},children:s.jsx(n,{icon:R})}),s.jsx(x,{type:"text",placeholder:Q("settings.users.searchPlaceholder"),value:$,onChange:s=>{D(s.target.value),I(1)},className:"settings-search-input"})]})}),s.jsx(r,{md:6,lg:8,className:"text-md-end mt-3 mt-md-0",children:s.jsx("span",{className:"text-muted small",children:Q("settings.users.showing",{count:X?.length||0,total:H?.length||0})})})]})})}),O&&s.jsx(c,{className:"settings-search-card",children:s.jsx(d,{children:s.jsxs("div",{className:"alert alert-danger mb-0",children:[s.jsxs("strong",{children:[Q("common.error"),":"]})," ",Q("settings.users.loadFailed"),": ",O.message||O.toString()||Q("common.error")]})})}),J&&s.jsx(c,{className:"settings-table-card",children:s.jsxs(d,{className:"settings-empty-state",children:[s.jsx(g,{color:"primary",size:"lg"}),s.jsx("p",{className:"text-muted mt-3 mb-0",children:Q("settings.users.loading")})]})}),!J&&s.jsx(c,{className:"settings-table-card",children:s.jsxs(d,{className:"p-0",children:[s.jsx("div",{className:"settings-table-responsive",style:{overflowX:"auto"},children:s.jsxs(h,{hover:!0,responsive:!0,className:"mb-0",children:[s.jsx(j,{className:"settings-table-header",children:s.jsxs(u,{children:[s.jsx(N,{className:"text-center",children:"#"}),s.jsx(N,{children:s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx(n,{icon:M,size:"sm"}),Q("settings.users.table.name")]})}),s.jsx(N,{children:Q("settings.users.table.email")}),s.jsx(N,{className:"text-center",children:Q("settings.users.table.group")}),s.jsx(N,{className:"text-center",children:Q("settings.users.table.actions")})]})}),s.jsx(p,{children:0===q?.length?s.jsx(u,{children:s.jsx(f,{colSpan:"5",className:"settings-empty-state",children:s.jsxs("div",{className:"text-muted",children:[s.jsx(n,{icon:R,size:"xl",className:"settings-empty-icon"}),s.jsx("p",{className:"mb-0",children:Q("settings.users.empty.title")}),s.jsx("small",{children:Q("settings.users.empty.subtitle")})]})})}):q.map((e,t)=>s.jsxs(u,{className:"settings-table-row",children:[s.jsx(f,{className:"text-center",children:s.jsx(b,{color:"light",className:"px-2 py-1",style:{borderRadius:"15px",fontSize:"11px",fontWeight:"500",color:"#6c757d"},children:K+t})}),s.jsx(f,{children:s.jsx("div",{className:"fw-medium text-dark",children:e.name})}),s.jsx(f,{children:s.jsx("span",{className:"text-muted",children:e.email})}),s.jsx(f,{className:"text-center",children:e.group?s.jsx(b,{color:ts(e.group.name),className:"settings-badge",children:e.group.name}):s.jsx(b,{color:"secondary",className:"settings-badge",children:Q("settings.users.noGroup")})}),s.jsx(f,{className:"text-center",children:s.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[s.jsx(a,{color:"light",size:"sm",className:"settings-action-btn edit",onClick:()=>ss(e.id),children:s.jsx(n,{icon:A,size:"sm",style:{color:"#0d6efd"}})}),s.jsx(a,{color:"light",size:"sm",className:"settings-action-btn delete",onClick:()=>es(e.id),children:s.jsx(n,{icon:G,size:"sm",style:{color:"#dc3545"}})})]})})]},e.id))})]})}),s.jsx("div",{className:"settings-mobile-cards",children:0===q?.length?s.jsx("div",{className:"settings-empty-state",children:s.jsxs("div",{className:"text-muted",children:[s.jsx(n,{icon:R,size:"xl",className:"settings-empty-icon"}),s.jsx("p",{className:"mb-0",children:Q("settings.users.empty.title")}),s.jsx("small",{children:Q("settings.users.empty.subtitle")})]})}):q.map((e,t)=>s.jsxs("div",{className:"settings-mobile-card",children:[s.jsx("div",{className:"settings-mobile-card-header",children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("span",{children:["#",K+t]}),s.jsx(b,{color:e.group?ts(e.group.name):"secondary",className:"settings-badge",children:e.group?e.group.name:Q("settings.users.noGroup")})]})}),s.jsxs("div",{className:"settings-mobile-card-body",children:[s.jsxs("div",{className:"settings-mobile-field",children:[s.jsx("span",{className:"settings-mobile-label",children:Q("settings.users.table.name")}),s.jsx("span",{className:"settings-mobile-value fw-medium",children:e.name})]}),s.jsxs("div",{className:"settings-mobile-field",children:[s.jsx("span",{className:"settings-mobile-label",children:Q("settings.users.table.email")}),s.jsx("span",{className:"settings-mobile-value text-muted",children:e.email})]})]}),s.jsxs("div",{className:"settings-mobile-actions",children:[s.jsx(a,{color:"light",size:"sm",className:"settings-action-btn edit",onClick:()=>ss(e.id),children:s.jsx(n,{icon:A,size:"sm",style:{color:"#0d6efd"}})}),s.jsx(a,{color:"light",size:"sm",className:"settings-action-btn delete",onClick:()=>es(e.id),children:s.jsx(n,{icon:G,size:"sm",style:{color:"#dc3545"}})})]})]},e.id))}),s.jsx("div",{className:"settings-pagination",children:s.jsx(T,{currentPage:E,totalPages:_,onPageChange:s=>{I(s)},itemsPerPage:W})})]})})]})};export{$ as default};
